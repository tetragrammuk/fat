(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e8072f3"],{1:function(t,e){},2:function(t,e){},3:function(t,e){},"390e":function(t,e,a){},"5d22":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outer"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.Active,callback:function(e){t.Active=e},expression:"Active"}},[a("el-tab-pane",{attrs:{label:"追蹤連結管理",name:"TAG"}},[a("All-tag-table")],1)],1)],1)},o=[],l=(a("7f7f"),a("cebe")),n=a.n(l),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillcontain"},[a("div",{staticClass:"contain"},[a("div",{staticClass:"newbutton"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.dialogFormVisible_add=!0}}},[t._v("新增官方好友追蹤連結")])],1),a("div",{staticClass:"keyword"},[a("el-select",{model:{value:t.select_keyword,callback:function(e){t.select_keyword=e},expression:"select_keyword"}},[a("el-option",{attrs:{label:"品牌",value:"logo"}}),a("el-option",{attrs:{label:"發布渠道",value:"announce"}}),a("el-option",{attrs:{label:"版位",value:"position"}}),a("el-option",{attrs:{label:"活動名稱",value:"activity"}})],1),a("el-input",{attrs:{placeholder:"請輸入關鍵字"},model:{value:t.input_keyword,callback:function(e){t.input_keyword=e},expression:"input_keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.filter_number_post},slot:"append"})],1)],1),a("div",{staticClass:"keyword"},[a("el-select",{model:{value:t.input_type,callback:function(e){t.input_type=e},expression:"input_type"}},[a("el-option",{attrs:{label:"點擊流量 >",value:"bigger"}}),a("el-option",{attrs:{label:"點擊流量 <",value:"small"}})],1),a("el-input",{attrs:{placeholder:"請輸入次數"},model:{value:t.input_number,callback:function(e){t.input_number=e},expression:"input_number"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.filter_number_post},slot:"append"})],1)],1),a("el-button",{staticStyle:{"margin-bottom":"1vw","font-size":"18px"},attrs:{type:"primary"},on:{click:t.onExportExcel}},[t._v("導出excel")]),a("el-divider"),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{id:"table",data:t.tableData,"row-style":"height:80px","empty-text":"目前沒有數劇哦~"}},[a("el-table-column",{attrs:{property:"logo",label:"品牌",align:"center",width:"200px",sortable:""}}),a("el-table-column",{attrs:{property:"announce",label:"發布渠道",align:"left",width:"170px",sortable:""}}),a("el-table-column",{attrs:{property:"position",label:"版位",align:"left",width:"170px",sortable:""}}),a("el-table-column",{attrs:{property:"activity",label:"活動名稱",align:"left",width:"170px",sortable:""}}),a("el-table-column",{attrs:{property:"click",label:"點擊流量",align:"center",width:"170px",sortable:""}}),a("el-table-column",{attrs:{property:"qrcode",label:"QR Code",align:"center",width:"170px",sortable:""},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.qrcode}})]}}])}),a("el-table-column",{attrs:{property:"url",label:"URL",align:"center",width:"450px",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-document-copy"},on:{click:function(a){return t.copy_text(e.row)}}}),a("div",[t._v(t._s(e.row.url))])]}}])}),a("el-table-column",{attrs:{property:"phone",label:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(a){return t.handle_click_delete(e.row)}}})]}}])})],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[t.paginations.total>0?a("el-pagination",{attrs:{background:"","page-sizes":t.paginations.pageSizes,"page-size":t.paginations.pageSize,layout:t.paginations.layout,total:t.paginations.total,"current-page":t.paginations.pageIndex},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}):t._e()],1)])],1)],1)],1),a("el-dialog",{attrs:{width:"30%",title:"新增官方好友追蹤連結",visible:t.dialogFormVisible_add,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible_add=e},close:t.dialog_close_add}},[a("el-divider"),a("el-form",{ref:"form_add",attrs:{model:t.add_form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"logo",label:"品牌"}},[a("div",{staticClass:"dialog_input_tagname"},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.logo,callback:function(e){t.$set(t.add_form,"logo",e)},expression:"add_form.logo"}})],1)]),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"fabu",label:"發布渠道"}},[a("div",{staticClass:"dialog_input_tagname"},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.fabu,callback:function(e){t.$set(t.add_form,"fabu",e)},expression:"add_form.fabu"}})],1)]),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"pos",label:"版位"}},[a("div",{staticClass:"dialog_input_tagname"},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.pos,callback:function(e){t.$set(t.add_form,"pos",e)},expression:"add_form.pos"}})],1)]),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"describe",label:"活動名稱"}},[a("div",{staticClass:"dialog_input_tagname"},[a("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:4},model:{value:t.add_form.describe,callback:function(e){t.$set(t.add_form,"describe",e)},expression:"add_form.describe"}})],1)])],1),a("div",{staticClass:"ps"},[a("el-button",{attrs:{type:"warning",plain:""}},[t._v("一但創立後即無法修改此追蹤連結")])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"large"},on:{click:t.add_click_cancel}},[t._v("取 消")]),a("el-button",{attrs:{size:"large",type:"primary"},on:{click:t.add_new_label}},[t._v("確 定")])],1)],1)],1)},r=[],d=a("21a6"),p=a.n(d),c=a("1146"),u=a.n(c),_=a("5f87"),f={data:function(){var t=function(t,e,a){if(!e)return a();if(e){var i=/^[\u4e00-\u9fa5_a-zA-Z0-9]{1,20}$/;i.test(e)?a():a(new Error("1 到 20 個字元，僅可為中英文、数字、下底線!"))}};return{select_keyword:"logo",input_keyword:"",input_number:"",input_type:"bigger",dialogFormVisible_add:!1,add_form:{logo:"",fabu:"",pos:"",describe:""},options:[{value:"website",label:"website"},{value:"Line",label:"Line"},{value:"Facebook",label:"Facebook"},{value:"Instagram",label:"Instagram"},{value:"btl",label:"btl"}],time_input_disabled_add:!0,dialogFormVisible:!1,label_position:"top",formLabelWidth:"120px",fix_form:{row_id:"",row_tag:"",row_tag_begin:"",row_time:"",row_time_begin:"",row_radio:""},fix_form_time_select:"標籤會永久存在會員資料裡",time_input_disabled:!0,rules:{logo:[{required:!0,message:"请填寫品牌名稱",trigger:"blur"},{min:1,max:10,message:"長度請介於 1 到 10 個字元",trigger:"blur"}],fabu:[{required:!0,message:"请填寫發布渠道",trigger:"blur"},{min:1,max:10,message:"長度請介於 1 到 10 個字元",trigger:"blur"}],pos:[{required:!0,message:"请填寫版面位置",trigger:"blur"},{min:1,max:10,message:"長度請介於 1 到 10 個字元",trigger:"blur"}],describe:[{required:!0,validator:t,trigger:"blur"}]},tableData:[],loading:!0,paginations:{total:0,pageIndex:1,pageSize:50,pageSize_begin:50,pageSizes:[5,10,15,20,50],layout:"total, sizes, prev, pager, next, jumper"},select_tags:[],tipVisibles:[]}},created:function(){},mounted:function(){this.filterpost()},methods:{onExportExcel:function(){this.exportExcel(document.getElementById("table"),"URL_data.xlsx");this.$message({message:"成功下載!",center:!0,type:"success"})},exportExcel:function(t,e){var a=this;this.paginations.pageSize=this.paginations.total,this.paginations.pageIndex=1;var i=Object(_["a"])("Token");n.a.post("https://test-backend-dot-flow-263607.appspot.com/line_add_display",{limit:this.paginations.pageSize,page:this.paginations.pageIndex,filter_type:this.input_type,filter_number:this.input_number,select_keyword:this.select_keyword,filter_keyword:this.input_keyword},{headers:{"x-access-token":i}}).then(function(i){return a.loading=!1,a.paginations.total=i.data.total,a.tableData=i.data.data,a.$nextTick(function(){var a=this;console.log("next tick");var i=u.a.utils.table_to_book(t),o=u.a.write(i,{bookType:"xlsx",bookSST:!0,type:"array"});try{p.a.saveAs(new Blob([o],{type:"application/octet-stream"}),e)}catch(s){"undefined"!==typeof console&&console.log(s,o)}this.paginations.pageSize=this.paginations.pageSize_begin,console.log(this.paginations.pageSize);var l=Object(_["a"])("Token");return n.a.post("https://test-backend-dot-flow-263607.appspot.com/line_add_display",{limit:this.paginations.pageSize,page:this.paginations.pageIndex,filter_type:this.input_type,filter_number:this.input_number,select_keyword:this.select_keyword,filter_keyword:this.input_keyword},{headers:{"x-access-token":l}}).then(function(t){return a.loading=!1,a.paginations.total=t.data.total,a.tableData=t.data.data}),o})})},copy_text:function(t){console.log(t);var e=document.createElement("input");e.value=t.url,console.log(e.value),document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.className="oInput",e.style.display="none",this.$message({message:"複製成功",type:"success"})},add_new_label:function(){var t=this;this.$refs.form_add.validate(function(e){if(!e)return!1;t.dialogFormVisible_add=!1;var a=Object(_["a"])("Token");n.a.post("https://test-backend-dot-flow-263607.appspot.com/line_add_create",{limit:t.paginations.pageSize,page:t.paginations.pageIndex,logo:t.add_form.logo,announce:t.add_form.fabu,position:t.add_form.pos,activity:t.add_form.describe},{headers:{"x-access-token":a}}).then(function(e){return t.loading=!1,t.paginations.total=e.data.total,t.tableData=e.data.data,t.add_form.logo="",t.add_form.fabu="",t.add_form.pos="",t.add_form.describe=""})})},add_click_cancel:function(){this.dialogFormVisible_add=!1,this.add_form.logo="",this.add_form.fabu="",this.add_form.pos="",this.add_form.describe=""},dialog_close_add:function(){this.$refs.form_add.resetFields(),this.add_form.logo="",this.add_form.fabu="",this.add_form.pos="",this.add_form.describe=""},dialog_close:function(){this.$refs.form.resetFields()},handle_click:function(t){this.dialogFormVisible=!0,this.fix_form.row_tag=t.label_name,this.fix_form.row_tag_begin=t.label_name,this.fix_form.row_time=t.label_period,this.fix_form.row_time_begin=t.label_period,this.fix_form.row_radio=t.label_radio,this.fix_form.row_id=t.label_id,console.log(t.label_radio),"永久"==this.fix_form.row_radio&&(this.time_input_disabled=!0,this.fix_form_time_select="標籤會永久存在會員資料裡",this.fix_form.row_time="0"),"有效天數"==this.fix_form.row_radio&&(console.log(this.fix_form.row_radio),this.time_input_disabled=!1,this.fix_form_time_select="標籤會在設定的天數後自動移除")},handle_click_delete:function(t){var e=this;1==this.tableData.length&&(1==this.paginations.pageIndex||this.paginations.pageIndex--);var a=Object(_["a"])("Token");n.a.post("https://test-backend-dot-flow-263607.appspot.com/line_add_delete",{limit:this.paginations.pageSize,page:this.paginations.pageIndex,url_id:t.url_id},{headers:{"x-access-token":a}}).then(function(t){return e.loading=!1,e.paginations.total=t.data.total,e.tableData=t.data.data})},handle_click_fixed:function(t){var e=this;this.dialogFormVisible=!1;var a=Object(_["a"])("Token");n.a.post("https://test-backend-dot-flow-263607.appspot.com/filter",{limit:this.paginations.pageSize,page:this.paginations.pageIndex,search_input:this.search_input,fixed_label_id:this.fix_form.row_id,fixed_label_name:this.fix_form.row_tag,fixed_label_period:this.fix_form.row_time,fixed_label_radio:this.fix_form.row_radio},{headers:{"x-access-token":a}}).then(function(t){return e.loading=!1,e.paginations.total=t.data.total_link_number,e.tableData=t.data.link_data})},filterpost:function(){var t=this;this.dialogFormVisible=!1;var e=Object(_["a"])("Token");n.a.post("https://test-backend-dot-flow-263607.appspot.com/line_add_display",{limit:this.paginations.pageSize,page:this.paginations.pageIndex,filter_type:this.input_type,filter_number:this.input_number,select_keyword:this.select_keyword,filter_keyword:this.input_keyword},{headers:{"x-access-token":e}}).then(function(e){return t.loading=!1,t.paginations.total=e.data.total,t.tableData=e.data.data}),console.log("see me la")},filter_number_post:function(){var t=this,e=Object(_["a"])("Token");n.a.post("https://test-backend-dot-flow-263607.appspot.com/line_add_display",{limit:this.paginations.pageSize,page:this.paginations.pageIndex,filter_type:this.input_type,filter_number:this.input_number,select_keyword:this.select_keyword,filter_keyword:this.input_keyword},{headers:{"x-access-token":e}}).then(function(e){return t.loading=!1,t.paginations.total=e.data.total,t.tableData=e.data.data})},handleSizeChange:function(t){this.loading=!0,this.paginations.pageSize=t,this.paginations.pageSize_begin=t,this.filterpost()},handleCurrentChange:function(t){this.loading=!0,this.paginations.pageIndex=t,this.filterpost()}}},g=f,m=(a("ceef"),a("2877")),b=Object(m["a"])(g,s,r,!1,null,"60a67fd7",null),h=b.exports,w={data:function(){return{Active:"TAG",Tag_active:"All",all_tag:"",temp_tag:"",forever_tag:"",Forever:!0,All:!0,Temp:!0}},components:{AllTagTable:h},created:function(){},mounted:function(){},methods:{show_all_total:function(t){console.log("see me"+t),this.all_tag=t},show_forever_total:function(t){this.forever_tag=t},show_temp_total:function(t){this.temp_tag=t},handleClick:function(t,e){"All"==t.name&&(this.All=!0,this.Forever=!1,this.Temp=!1),"Forever"==t.name&&(this.All=!1,this.Forever=!0,this.Temp=!1),"Temp"==t.name&&(this.All=!1,this.Forever=!1,this.Temp=!0)}}},v=w,k=(a("dbdf"),Object(m["a"])(v,i,o,!1,null,"17e383b1",null));e["default"]=k.exports},ceef:function(t,e,a){"use strict";var i=a("e5fc"),o=a.n(i);o.a},dbdf:function(t,e,a){"use strict";var i=a("390e"),o=a.n(i);o.a},e5fc:function(t,e,a){}}]);