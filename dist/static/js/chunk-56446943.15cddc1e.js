(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56446943"],{"0b8c":function(e,t,a){"use strict";var s=a("49f0"),o=a.n(s);o.a},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"49f0":function(e,t,a){},"541f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fillcontain"},[a("div",{staticClass:"contain",staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start"}},[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"flex-start","align-items":"flex-start"}},[a("div",{staticClass:"contain",staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start"}},[a("div",{staticClass:"contain3"},[a("el-divider",{attrs:{"content-position":"left"}},[a("h1",[a("i",{staticClass:"el-icon-chat-dot-round"}),e._v("訊息清單\n            ")])]),a("el-dialog",{attrs:{title:"設定自動回覆",visible:e.autoReplyDialogVisible,width:"25%","before-close":e.handleClose},on:{"update:visible":function(t){e.autoReplyDialogVisible=t}}},[a("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between","align-items":"flex-start"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px",rules:e.rules}},[a("el-form-item",{attrs:{label:"訊息腳本"}},[a("el-col",{attrs:{span:20}},[a("el-select",{attrs:{size:"medium",placeholder:"請選擇訊息"},model:{value:e.AutoMsg_id,callback:function(t){e.AutoMsg_id=t},expression:"AutoMsg_id"}},e._l(e.autoReplyTableData,function(e){return a("el-option",{key:e.msg_id,attrs:{label:e.name,value:e.msg_id}})}),1)],1)],1),a("el-form-item",{attrs:{label:"關鍵字",prop:"keyword"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{disabled:e.welcome_radio,placeholder:"請輸入關鍵字",maxlength:"20","show-word-limit":""},model:{value:e.form.keyword,callback:function(t){e.$set(e.form,"keyword",t)},expression:"form.keyword"}})],1)],1),a("el-form-item",{attrs:{label:""}},[a("add-label",{on:{transferLabels:e.parentGetLeabels}})],1),a("el-form-item",{attrs:{label:"是否為歡迎訊息"}},[a("el-radio",{attrs:{label:!0},on:{change:e.welcome_radio_f},model:{value:e.welcome_radio,callback:function(t){e.welcome_radio=t},expression:"welcome_radio"}},[e._v("是")]),a("el-radio",{attrs:{label:!1},model:{value:e.welcome_radio,callback:function(t){e.welcome_radio=t},expression:"welcome_radio"}},[e._v("否")])],1),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{size:"large",type:"info",plain:""}},[e._v("歡 迎 訊 息 會 覆 蓋 掉 原 本 的，請 再 三 確 認")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.autoReplyDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checkReply}},[e._v("確 定")])],1)])],1),a("div",{staticClass:"table_container",staticStyle:{width:"800px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",cursor:"pointer"},attrs:{data:e.tableData,border:"",stripe:"","highlight-current-row":"","header-cell-class-name":"table-header-class"},on:{"row-click":e.onclick}},[a("el-table-column",{attrs:{label:"序號",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{cursor:"pointer"}},[e._v(e._s(t.$index+(e.paginations.pageIndex-1)*e.paginations.pageSize+1))])]}}])}),a("el-table-column",{staticStyle:{cursor:"pointer"},attrs:{label:"訊息名稱",width:"428",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此訊息為歡迎訊息",placement:"left"}},[e.welcome_msg==t.row.msg_id?a("i",{staticClass:"el-icon-s-home",staticStyle:{"margin-right":"5px"}}):e._e()]),a("span",{staticStyle:{"margin-left":"0"}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"創建時間",width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.event_time))])]}}])}),a("el-table-column",{attrs:{label:"刪除",width:"80",align:"center"}},[[a("span",{staticStyle:{cursor:"pointer"}},[a("i",{staticClass:"el-icon-delete"})])]],2)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[e.paginations.total>0?a("el-pagination",{attrs:{background:"","page-sizes":e.paginations.pageSizes,"page-size":e.paginations.pageSize,layout:e.paginations.layout,total:e.paginations.total,"current-page":e.paginations.pageIndex},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e()],1)])],1)],1),a("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start"}},[a("div",{staticClass:"contain3"},[a("el-divider",{attrs:{"content-position":"left"}},[a("h1",{staticClass:"contain2"},[a("i",{staticClass:"el-icon-setting"}),e._v("歡迎訊息設定\n              ")])]),a("el-button",{staticClass:"primaryButton",attrs:{type:"primary",size:"medium",round:"",icon:"el-icon-share"},on:{click:e.welcome_setting}},[e._v("變更設定")])],1),a("div",{staticClass:"table_container",staticStyle:{width:"800px"}},[a("div",{staticClass:"welcome_hint"},[a("el-button",{attrs:{type:"info",plain:""}},[a("div",{staticStyle:{"margin-top":"5px","margin-bottom":"10px"}},[e._v("在此設定-新會員-加入時的歡迎訊息 ")]),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[e._v("請注意 -第二天開始後- 的訊息會納入Line計費")])])],1),a("el-form",{ref:"welcome",staticClass:"demo-ruleForm",attrs:{"label-position":"center","label-width":"300px",rules:e.rules,model:e.welcome}},[a("el-form-item",{attrs:{label:"每日發布訊息時間",prop:"time"}},[a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"選擇時間"},model:{value:e.welcome.time,callback:function(t){e.$set(e.welcome,"time",t)},expression:"welcome.time"}})],1),a("el-form-item",{attrs:{label:"(會員加入即發出)-第一天",prop:"day1"}},[a("el-select",{attrs:{size:"large",placeholder:"請選擇訊息"},model:{value:e.welcome.day1,callback:function(t){e.$set(e.welcome,"day1",t)},expression:"welcome.day1"}},e._l(e.autoReplyTableData,function(e){return a("el-option",{key:e.msg_id,attrs:{label:e.name,value:e.msg_id}})}),1),a("el-switch",{ref:"active1",staticClass:"switch",attrs:{"active-value":"true","inactive-value":"false","active-text":"啟用","inactive-text":"取消"},model:{value:e.welcome.active1,callback:function(t){e.$set(e.welcome,"active1",t)},expression:"welcome.active1"}})],1),a("el-form-item",{attrs:{label:"第二天",prop:"day2"}},[a("el-select",{attrs:{size:"large",placeholder:"請選擇訊息"},model:{value:e.welcome.day2,callback:function(t){e.$set(e.welcome,"day2",t)},expression:"welcome.day2"}},e._l(e.autoReplyTableData,function(e){return a("el-option",{key:e.msg_id,attrs:{label:e.name,value:e.msg_id}})}),1),a("el-switch",{ref:"active2",staticClass:"switch",attrs:{"active-value":"true","inactive-value":"false","active-text":"啟用","inactive-text":"取消"},model:{value:e.welcome.active2,callback:function(t){e.$set(e.welcome,"active2",t)},expression:"welcome.active2"}})],1),a("el-form-item",{attrs:{label:"第三天",prop:"day3"}},[a("el-select",{attrs:{size:"large",placeholder:"請選擇訊息"},model:{value:e.welcome.day3,callback:function(t){e.$set(e.welcome,"day3",t)},expression:"welcome.day3"}},e._l(e.autoReplyTableData,function(e){return a("el-option",{key:e.msg_id,attrs:{label:e.name,value:e.msg_id}})}),1),a("el-switch",{ref:"active3",staticClass:"switch",attrs:{"active-value":"true","inactive-value":"false","active-text":"啟用","inactive-text":"取消"},model:{value:e.welcome.active3,callback:function(t){e.$set(e.welcome,"active3",t)},expression:"welcome.active3"}})],1),a("el-form-item",{attrs:{label:"第四天",prop:"day4"}},[a("el-select",{attrs:{size:"large",placeholder:"請選擇訊息"},model:{value:e.welcome.day4,callback:function(t){e.$set(e.welcome,"day4",t)},expression:"welcome.day4"}},e._l(e.autoReplyTableData,function(e){return a("el-option",{key:e.msg_id,attrs:{label:e.name,value:e.msg_id}})}),1),a("el-switch",{ref:"active4",staticClass:"switch",attrs:{"active-value":"true","inactive-value":"false","active-text":"啟用","inactive-text":"取消"},model:{value:e.welcome.active4,callback:function(t){e.$set(e.welcome,"active4",t)},expression:"welcome.active4"}})],1),a("el-form-item",{attrs:{label:"第五天",prop:"day5"}},[a("el-select",{attrs:{size:"large",placeholder:"請選擇訊息"},model:{value:e.welcome.day5,callback:function(t){e.$set(e.welcome,"day5",t)},expression:"welcome.day5"}},e._l(e.autoReplyTableData,function(e){return a("el-option",{key:e.msg_id,attrs:{label:e.name,value:e.msg_id}})}),1),a("el-switch",{ref:"active5",staticClass:"switch",attrs:{"active-value":"true","inactive-value":"false","active-text":"啟用","inactive-text":"取消"},model:{value:e.welcome.active5,callback:function(t){e.$set(e.welcome,"active5",t)},expression:"welcome.active5"}})],1),a("el-form-item",{attrs:{label:"第六天",prop:"day6"}},[a("el-select",{attrs:{size:"large",placeholder:"請選擇訊息"},model:{value:e.welcome.day6,callback:function(t){e.$set(e.welcome,"day6",t)},expression:"welcome.day6"}},e._l(e.autoReplyTableData,function(e){return a("el-option",{key:e.msg_id,attrs:{label:e.name,value:e.msg_id}})}),1),a("el-switch",{ref:"active6",staticClass:"switch",attrs:{"active-value":"true","inactive-value":"false","active-text":"啟用","inactive-text":"取消"},model:{value:e.welcome.active6,callback:function(t){e.$set(e.welcome,"active6",t)},expression:"welcome.active6"}})],1),a("el-form-item",{attrs:{label:"第七天",prop:"day7"}},[a("el-select",{attrs:{size:"large",placeholder:"請選擇訊息"},model:{value:e.welcome.day7,callback:function(t){e.$set(e.welcome,"day7",t)},expression:"welcome.day7"}},e._l(e.autoReplyTableData,function(e){return a("el-option",{key:e.msg_id,attrs:{label:e.name,value:e.msg_id}})}),1),a("el-switch",{ref:"active7",staticClass:"switch",attrs:{"active-value":"true","inactive-value":"false","active-text":"啟用","inactive-text":"取消"},model:{value:e.welcome.active7,callback:function(t){e.$set(e.welcome,"active7",t)},expression:"welcome.active7"}})],1)],1)],1)])]),a("div",{staticStyle:{"margin-left":"150px"}},[a("transition",{attrs:{name:"slide-fade"}},[e.show?a("div",{staticClass:"contain",staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},[a("h1",{staticClass:"contain4"},[a("i",{staticClass:"el-icon-mobile"}),e._v("訊息預覽\n            ")]),a("div",{staticClass:"phone",attrs:{id:"1"}},[a("div",{staticClass:"screen"},[a("div",{staticClass:"hair",staticStyle:{display:"flex","flex-direction":"row","justify-content":"center"}},[a("div",{staticClass:"air"})]),a("el-scrollbar",[a("div",{staticStyle:{height:"530px",display:"flex","flex-direction":"column","flex-wrap":"nowrap","align-items":"flex-start"}},e._l(e.componentShowList,function(e){return a("div",{key:e.id,staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start",padding:"10px"}},[a(e.text,{ref:"componentShowList",refInFor:!0,tag:"component",attrs:{showID:e.id}})],1)}),0)])],1)])]):e._e()])],1)])])])},o=[],i=a("7413"),l=a("6d02"),n=a("8842"),c=a("985b"),r=a("c3f0"),d=a("833b"),m=a("53c8"),g=a("cebe"),u=a.n(g),h=a("5f87"),p={data:function(){var e=this,t=function(t,a,s){var o=e.$refs.active1.value;return console.log("下面是active1"),console.log(o),console.log("ativeSDFFSD="+e.welcome.active1_begin),o!=e.welcome.active1_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):a!=e.welcome.day1_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):void 0},a=function(t,a,s){var o=e.$refs.active2.value;return console.log("ative="+o),o!=e.welcome.active2_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):a!=e.welcome.day2_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):void 0},s=function(t,a,s){var o=e.$refs.active3.value;return console.log("ative="+o),o!=e.welcome.active3_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):a!=e.welcome.day3_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):void 0},o=function(t,a,s){var o=e.$refs.active4.value;return console.log("ative="+o),o!=e.welcome.active4_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):a!=e.welcome.day4_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):void 0},i=function(t,a,s){var o=e.$refs.active5.value;return console.log("ative="+o),console.log("welcome.active5_begin="+e.welcome.active5_begin),o!=e.welcome.active5_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):a!=e.welcome.day5_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):void 0},l=function(t,a,s){var o=e.$refs.active6.value;return console.log("ative="+o),o!=e.welcome.active6_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):a!=e.welcome.day6_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):void 0},n=function(t,a,s){var o=e.$refs.active7.value;return console.log("ative="+o),o!=e.welcome.active7_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):a!=e.welcome.day7_begin?(console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))):void 0},c=function(t,a,s){if(a!=e.welcome.time_begin)return console.log("rule生效"),s(new Error("有修改 : 按下確定才完成變更"))};return{welcome:{time:"",day1:"",active1:"true",day2:"",active2:"",day3:"",active3:"",day4:"",active4:"",day5:"",active5:"",day6:"",active6:"",day7:"",active7:"",time_begin:"",day1_begin:"",active1_begin:"",day2_begin:"",active2_begin:"",day3_begin:"",active3_begin:"",day4_begin:"",active4_begin:"",day5_begin:"",active5_begin:"",day6_begin:"",active6_begin:"",day7_begin:"",active7_begin:""},welcome_msg:"",welcome_radio:!1,autoReplyDialogVisible:!1,autoReplyTableData:[],AutoMsg_id:"",label_list:[],tableData:[],tableAutoData:[],loading:!0,loadingAuto:!0,paginations:{total:0,pageIndex:1,pageSize:20,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},paginations_Auto:{total:0,pageIndex:1,pageSize:20,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},APIbaseURL:"https://test-backend-dot-flow-263607.appspot.com",show:!1,componentShowList:[],flexList:[1],buttonTexts:[],messages:[],currentMsg_id:"",destroyedCnt:0,lastComLen:0,form:{keyword:""},rules:{day1:[{validator:t,trigger:"change"}],day2:[{validator:a,trigger:"change"}],day3:[{validator:s,trigger:"change"}],day4:[{validator:o,trigger:"change"}],day5:[{validator:i,trigger:"change"}],day6:[{validator:l,trigger:"change"}],day7:[{validator:n,trigger:"change"}],time:[{validator:c,trigger:"change"}]}}},components:{showVideo:i["a"],showImage:l["a"],showImageMsg:n["a"],showImageOnly:c["a"],showText:r["a"],showMultiFlex:d["a"],addLabel:m["a"]},created:function(){console.log("addlistener autoList componentHandSharkEvent"),this.$bus.$on("componentHandSharkEvent",this.comlistener),this.$bus.$on("flexHandSharkEvent",this.flexlistener),this.$bus.$on("destroyed",this.destroyedlistener)},beforeDestroy:function(){console.log("beforeDestroy autoList"),this.$bus.$off("flexHandSharkEvent",this.flexlistener),this.$bus.$off("componentHandSharkEvent",this.comlistener),this.$bus.$off("destroyed",this.destroyedlistener)},mounted:function(){this.getMsgList(),this.getAutoList(),this.Listget(),this.Welcomeget()},methods:{welcome_setting:function(){var e=this,t=Object(h["a"])("Token");this.$confirm("是否變更設定","提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("before"+e.welcome.active1),"true"==e.welcome.active1?e.welcome.active1="1":e.welcome.active1="0","true"==e.welcome.active2?e.welcome.active2="1":e.welcome.active2="0","true"==e.welcome.active3?e.welcome.active3="1":e.welcome.active3="0","true"==e.welcome.active4?e.welcome.active4="1":e.welcome.active4="0","true"==e.welcome.active5?e.welcome.active5="1":e.welcome.active5="0","true"==e.welcome.active6?e.welcome.active6="1":e.welcome.active6="0","true"==e.welcome.active7?e.welcome.active7="1":e.welcome.active7="0",u()({method:"post",baseURL:e.APIbaseURL,url:"/set_welcome",data:{welcome_msg_day1:e.welcome.day1,welcome_msg_day2:e.welcome.day2,welcome_msg_day3:e.welcome.day3,welcome_msg_day4:e.welcome.day4,welcome_msg_day5:e.welcome.day5,welcome_msg_day6:e.welcome.day6,welcome_msg_day7:e.welcome.day7,welcome_msg_active1:e.welcome.active1,welcome_msg_active2:e.welcome.active2,welcome_msg_active3:e.welcome.active3,welcome_msg_active4:e.welcome.active4,welcome_msg_active5:e.welcome.active5,welcome_msg_active6:e.welcome.active6,welcome_msg_active7:e.welcome.active7,timing:e.welcome.time},headers:{"Content-Type":"application/json","x-access-token":t}}).then(function(t){"success"==t.data.message?(e.Welcomeget(),e.$refs.welcome.resetFields(),e.$message({type:"success",message:"成功變更!"})):e.$message({type:"info",message:"變更失敗!!"})})}).catch(function(){e.$message({type:"info",message:"變更取消!!"})})},Welcomeget:function(){var e=this,t=Object(h["a"])("Token");u()({method:"post",baseURL:this.APIbaseURL,url:"/query_welcome",data:{type:"welcomemsg"},headers:{"Content-Type":"application/json","x-access-token":t}}).then(function(t){e.welcome.time_begin=t.data.timing,e.welcome.day1_begin=t.data.response.day1.msg_id,e.welcome.active1_begin=t.data.response.day1.active,console.log("是welcome.active1_begin"+e.welcome.active1_begin),e.welcome.day2_begin=t.data.response.day2.msg_id,e.welcome.active2_begin=t.data.response.day2.active,e.welcome.day3_begin=t.data.response.day3.msg_id,e.welcome.active3_begin=t.data.response.day3.active,e.welcome.day4_begin=t.data.response.day4.msg_id,e.welcome.active4_begin=t.data.response.day4.active,e.welcome.day5_begin=t.data.response.day5.msg_id,e.welcome.active5_begin=t.data.response.day5.active,e.welcome.day6_begin=t.data.response.day6.msg_id,e.welcome.active6_begin=t.data.response.day6.active,e.welcome.day7_begin=t.data.response.day7.msg_id,e.welcome.active7_begin=t.data.response.day7.active,e.welcome.day1=t.data.response.day1.msg_id,e.welcome.active1="true",e.welcome.active1=t.data.response.day1.active,console.log("我是response.day1.active"+t.data.response.day1.active),console.log("我是welcome.active1"+e.welcome.active1),e.welcome.day2=t.data.response.day2.msg_id,e.welcome.active2=t.data.response.day2.active,e.welcome.day3=t.data.response.day3.msg_id,e.welcome.active3=t.data.response.day3.active,e.welcome.day4=t.data.response.day4.msg_id,e.welcome.active4=t.data.response.day4.active,e.welcome.day5=t.data.response.day5.msg_id,e.welcome.active5=t.data.response.day5.active,e.welcome.day6=t.data.response.day6.msg_id,e.welcome.active6=t.data.response.day6.active,e.welcome.day7=t.data.response.day7.msg_id,e.welcome.active7=t.data.response.day7.active,e.welcome.time=t.data.timing})},Listget:function(){var e=this,t=Object(h["a"])("Token");u()({method:"post",baseURL:this.APIbaseURL,url:"/query_msg",data:{limit:999999,page:1},headers:{"Content-Type":"application/json","x-access-token":t}}).then(function(t){e.autoReplyTableData=t.data.data})},autoReplyOnclick:function(){var e=this;this.autoReplyDialogVisible=!0;var t=Object(h["a"])("Token");u()({method:"post",baseURL:this.APIbaseURL,url:"/query_msg",data:{limit:999999,page:1},headers:{"Content-Type":"application/json","x-access-token":t}}).then(function(t){e.autoReplyTableData=t.data.data})},welcome_radio_f:function(){this.$refs.form.resetFields()},destroyedlistener:function(e){console.log("destroyed ID "+e),this.destroyedCnt++,console.log("destroyedCnt = "+this.destroyedCnt+" lastComLen = "+this.lastComLen),this.destroyedCnt==this.lastComLen&&(this.rebuildShow(),this.destroyedCnt=0)},comlistener:function(e){if(console.log("receive autoList componentHandSharkEvent "+e),"flex"==this.messages[e].type){if(this.flexList=[1],"carousel"==this.messages[e].contents.type){var t;for(t=1;t<this.messages[e].contents.contents.length;t++)this.flexList.push(t+1);this.$bus.$emit("specialEvent"+e,e,this.flexList)}}else if("imagemap"==this.messages[e].type){var a=this.messages[e].baseUrl+"/"+this.messages[e].baseSize.height;this.$bus.$emit("imageMsgUrlEvent"+e,a)}else"image"==this.messages[e].type?this.$bus.$emit("imageUrlEvent"+e,this.messages[e].originalContentUrl):"video"==this.messages[e].type?(this.$bus.$emit("videoUrlEvent"+e,this.messages[e].originalContentUrl),this.$bus.$emit("vedioPreviewUrlEvent"+e,this.messages[e].previewImageUrl)):"text"==this.messages[e].type&&this.$bus.$emit("textEvent"+e,this.messages[e].htmlStr)},flexlistener:function(e,t){if(console.log("receive autoList flexHandSharkEvent "+e+" "+t),"carousel"==this.messages[e].contents.type){for(this.$bus.$emit("imageUrlEvent"+e+"_"+(t+1),this.messages[e].contents.contents[t].hero.url),this.$bus.$emit("flexTitleEvent"+e+"_"+(t+1),this.messages[e].contents.contents[t].body.contents[0].text),this.$bus.$emit("flexTextEvent"+e+"_"+(t+1),this.messages[e].contents.contents[t].body.contents[1].text),console.log("ssssssssssss "+t),this.buttonTexts=[],a=0;a<this.messages[e].contents.contents[t].footer.contents.length;a++)this.buttonTexts.push(this.messages[e].contents.contents[t].footer.contents[a].action.label);this.$bus.$emit("showButtonsTextEvevt"+e+"_"+(t+1),this.buttonTexts)}else{var a;for(this.$bus.$emit("imageUrlEvent"+e+"_"+(t+1),this.messages[e].contents.hero.url),this.$bus.$emit("flexTitleEvent"+e+"_"+(t+1),this.messages[e].contents.body.contents[0].text),this.$bus.$emit("flexTextEvent"+e+"_"+(t+1),this.messages[e].contents.body.contents[1].text),console.log("ssssssssssss "+t),this.buttonTexts=[],a=0;a<this.messages[e].contents.footer.contents.length;a++)this.buttonTexts.push(this.messages[e].contents.footer.contents[a].action.label);this.$bus.$emit("showButtonsTextEvevt"+e+"_"+(t+1),this.buttonTexts)}},onclickAuto:function(e,t){(this.destroyedCnt=0,this.lastComLen=this.componentShowList.length,console.log(t.label),console.log(e),this.messages=e.content,console.log("msgCnt "+this.messages.length),console.log(this.messages),this.currentMsg_id=e.msg_id,"刪除"!=t.label)?(this.show=!0,console.log(this.componentShowList.length),this.componentShowList.length?this.componentShowList=[]:this.rebuildShow()):(console.log("deleteAutoReply "+e.reply_id),this.deleteAuto(e.reply_id),this.componentShowList=[],this.lastComLen=0)},onclick:function(e,t){var a=this;(this.destroyedCnt=0,this.lastComLen=this.componentShowList.length,console.log(t.label),console.log(e),this.messages=e.content,console.log("msgCnt "+this.messages.length),console.log(this.messages),this.currentMsg_id=e.msg_id,"刪除"!=t.label)?(this.show=!0,console.log(this.componentShowList.length),this.componentShowList.length?this.componentShowList=[]:this.rebuildShow()):this.$confirm("如自動回覆或歡迎訊息有此訊息也將一併被刪除！").then(function(t){console.log("deleteMsg "+e.msg_id),a.deleteMsg(e.msg_id),a.componentShowList=[],a.lastComLen=0,done()}).catch(function(e){})},rebuildShow:function(){var e;for(console.log("rebuildShow"),e=0;e<this.messages.length;e++)"flex"==this.messages[e].type?this.componentShowList.push({text:"showMultiFlex",id:e}):"imagemap"==this.messages[e].type?this.componentShowList.push({text:"showImageMsg",id:e}):"image"==this.messages[e].type?this.componentShowList.push({text:"showImageOnly",id:e}):"text"==this.messages[e].type?this.componentShowList.push({text:"showText",id:e}):"video"==this.messages[e].type&&this.componentShowList.push({text:"showVideo",id:e})},deleteAuto:function(e){var t=this;this.loadingAuto=!0;var a=Object(h["a"])("Token");1==this.tableData.length&&(1==this.paginations_Auto.pageIndex||this.paginations_Auto.pageIndex--),u()({method:"post",baseURL:this.APIbaseURL,url:"/delete_auto",data:{reply_id:e},headers:{"Content-Type":"application/json","x-access-token":a}}).then(function(e){t.getAutoList(),console.log(e)})},deleteMsg:function(e){var t=this;this.loading=!0;var a=Object(h["a"])("Token");1==this.tableData.length&&(1==this.paginations.pageIndex||this.paginations.pageIndex--),u()({method:"post",baseURL:this.APIbaseURL,url:"/delete_msg",data:{msg_id:e},headers:{"Content-Type":"application/json","x-access-token":a}}).then(function(e){t.getMsgList(),console.log(e)})},getAutoList:function(){var e=this,t=Object(h["a"])("Token");u()({method:"post",baseURL:this.APIbaseURL,url:"/query_auto",data:{limit:this.paginations_Auto.pageSize,page:this.paginations_Auto.pageIndex},headers:{"Content-Type":"application/json","x-access-token":t}}).then(function(t){console.log(t.data.data.length),console.log(t.data.data),e.loadingAuto=!1,e.paginations_Auto.total=t.data.total,e.tableAutoData=t.data.data})},getMsgList:function(){var e=this,t=Object(h["a"])("Token");u()({method:"post",baseURL:this.APIbaseURL,url:"/query_msg",data:{limit:this.paginations.pageSize,page:this.paginations.pageIndex},headers:{"Content-Type":"application/json","x-access-token":t}}).then(function(t){e.loading=!1,e.paginations.total=t.data.total,e.tableData=t.data.data})},handleSizeChange:function(e){this.loading=!0,this.paginations.pageSize=e,this.getMsgList()},handleCurrentChange:function(e){this.loading=!0,this.paginations.pageIndex=e,this.getMsgList()},handleSizeChange_Auto:function(e){this.loadingAuto=!0,this.paginations_Auto.pageSize=e,this.getAutoList()},handleCurrentChange_Auto:function(e){this.loadingAuto=!0,this.paginations_Auto.pageIndex=e,this.getAutoList()},handleClose:function(e){this.$confirm("設定並未儲存").then(function(t){e()}).catch(function(e){})},parentGetLeabels:function(e){this.label_list=e},checkReply:function(){var e=this;this.$refs["form"].validate(function(t){return t?(console.log("success"),e.setAutoReply(),e.autoReplyDialogVisible=!1,!0):(e.$message({message:"關鍵字不得為空!!",type:"warning"}),console.log("form fail"),!1)})},setAutoReply:function(){var e=this;console.log("post set auto");var t={keyword:this.form.keyword,msg_id:this.AutoMsg_id,label_list:this.label_list,welcome_msg:this.welcome_radio?1:0};console.log(t);var a=Object(h["a"])("Token");u()({method:"post",baseURL:this.APIbaseURL,url:"/auto_reply",data:t,headers:{"Content-Type":"application/json","x-access-token":a}}).then(function(t){console.log(t),e.welcome_radio?(e.loading=!0,e.getMsgList()):(e.loadingAuto=!0,e.getAutoList()),"upload completed"==t.data.message?e.$message({message:"Upload completed !",type:"success"}):"keyword has been exist!"==t.data.message?e.$message({message:"Keyword has been existed !",type:"warning"}):e.$message.error("Fail !")})}}},v=p,w=(a("0b8c"),a("2877")),f=Object(w["a"])(v,s,o,!1,null,"238ca19e",null);t["default"]=f.exports},"6b54":function(e,t,a){"use strict";a("3846");var s=a("cb7c"),o=a("0bfb"),i=a("9e1e"),l="toString",n=/./[l],c=function(e){a("2aba")(RegExp.prototype,l,e,!0)};a("79e5")(function(){return"/a/b"!=n.call({source:"a",flags:"b"})})?c(function(){var e=s(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)}):n.name!=l&&c(function(){return n.call(this)})}}]);