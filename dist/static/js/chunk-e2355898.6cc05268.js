(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2355898"],{"086a":function(t,e,n){},"09fd":function(t,e,n){"use strict";var i=n("c3a1"),s=n.n(i);s.a},"0c22":function(t,e,n){},"171e":function(t,e,n){"use strict";var i=n("8e3a"),s=n.n(i);s.a},"209b":function(t,e,n){},2135:function(t,e,n){"use strict";var i=n("27e7"),s=n.n(i);s.a},"27e7":function(t,e,n){},"2cac":function(t,e,n){"use strict";var i=n("8019"),s=n.n(i);s.a},"2e23":function(t,e,n){"use strict";var i=n("3c12"),s=n.n(i);s.a},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"386b":function(t,e,n){var i=n("5ca1"),s=n("79e5"),o=n("be13"),a=/"/g,l=function(t,e,n,i){var s=String(o(t)),l="<"+e;return""!==n&&(l+=" "+n+'="'+String(i).replace(a,"&quot;")+'"'),l+">"+s+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(l),i(i.P+i.F*s(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},"3c12":function(t,e,n){},"47aa":function(t,e,n){"use strict";var i=n("086a"),s=n.n(i);s.a},4917:function(t,e,n){"use strict";var i=n("cb7c"),s=n("9def"),o=n("0390"),a=n("5f1b");n("214f")("match",1,function(t,e,n,l){return[function(n){var i=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=l(n,t,this);if(e.done)return e.value;var r=i(t),c=String(this);if(!r.global)return a(r,c);var p=r.unicode;r.lastIndex=0;var g,u=[],h=0;while(null!==(g=a(r,c))){var d=String(g[0]);u[h]=d,""===d&&(r.lastIndex=o(c,s(r.lastIndex),p)),h++}return 0===h?null:u}]})},"5f61":function(t,e,n){},6444:function(t,e){function n(){throw new Error("tty.ReadStream is not implemented")}function i(){throw new Error("tty.ReadStream is not implemented")}e.isatty=function(){return!1},e.ReadStream=n,e.WriteStream=i},"6b54":function(t,e,n){"use strict";n("3846");var i=n("cb7c"),s=n("0bfb"),o=n("9e1e"),a="toString",l=/./[a],r=function(t){n("2aba")(RegExp.prototype,a,t,!0)};n("79e5")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?r(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?s.call(t):void 0)}):l.name!=a&&r(function(){return l.call(this)})},8019:function(t,e,n){},"8e3a":function(t,e,n){},"8f93":function(t,e,n){},"9d35":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fillcontain",staticStyle:{display:"flex","justify-content":"flex-start","align-items":"flex-start"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start"}},[n("el-divider",{attrs:{"content-position":"left"}},[n("h1",[n("i",{staticClass:"el-icon-message"}),t._v("訊息製作\n      ")])]),n("div",{ref:"contain",staticClass:"contain"},[n("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center","margin-bottom":"10px"}},[n("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"}},[n("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("訊息名稱:")]),n("div",{staticStyle:{width:"200px","margin-left":"10px"}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{prop:"msgName"}},[n("el-input",{attrs:{maxlength:"20","show-word-limit":"",size:"small "},model:{value:t.form.msgName,callback:function(e){t.$set(t.form,"msgName",e)},expression:"form.msgName"}})],1)],1)],1)]),n("el-button",{staticClass:"primaryButton",staticStyle:{"margin-bottom":"20px"},attrs:{icon:"el-icon-folder-add",type:"primary",size:"medium",round:""},on:{click:t.checkForms}},[t._v("儲存")])],1),n("el-divider"),t._l(t.componentList,function(e,i){return n("div",{key:e.id,staticStyle:{width:"100%",display:"flex","flex-direction":"column","align-items":"flex-start"}},[n("div",{staticClass:"msg_ele",staticStyle:{width:"100%",display:"flex","justify-content":"space-between","align-items":"flex-start",padding:"10px"}},[n(e.text,{ref:"componentList",refInFor:!0,tag:"component",attrs:{comID:e.id,realIndex:i},on:{getJSON:t.parentGetJSON,deleteMultiflexComponent:t.deleteComponent}}),n("div",{staticClass:"tool"},[n("i",{staticClass:"el-icon-delete",staticStyle:{color:"red",cursor:"pointer"},on:{click:function(e){return t.deleteComponent(i)}}}),1!=t.componentList.length&&0!=i?n("i",{staticClass:"el-icon-caret-top",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.moveUp(i)}}}):t._e(),1!=t.componentList.length&&4!=i?n("i",{staticClass:"el-icon-caret-bottom",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.moveDown(i)}}}):t._e()])],1),n("el-divider")],1)}),n("div",{staticStyle:{margin:"10px",color:"rgb(130, 130, 130)"}},[t._v("新增訊息模組")]),n("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"flex-start","flex-wrap":"wrap"}},[n("div",{staticClass:"fakeButton",on:{click:t.addText}},[n("i",{staticClass:"el-icon-chat-line-square icon"}),t._v("\n          +文字\n        ")]),n("div",{staticClass:"fakeButton",on:{click:t.addImage}},[n("i",{staticClass:"el-icon-picture-outline icon"}),t._v("\n          +圖片\n        ")]),n("div",{staticClass:"fakeButton",on:{click:t.addImageMsg}},[n("i",{staticClass:"el-icon-menu icon"}),t._v("\n          +圖文訊息\n        ")]),n("div",{staticClass:"fakeButton",on:{click:t.addFlex}},[n("i",{staticClass:"el-icon-document-copy icon"}),t._v("\n          +輪播圖卡\n        ")]),n("div",{staticClass:"fakeButton",on:{click:t.addVideo}},[n("i",{staticClass:"el-icon-video-play icon"}),t._v("\n          +影片\n        ")])])],2)],1),n("div",{staticStyle:{"margin-left":"50px","margin-top":"69px"}},[n("transition",{attrs:{name:"slide-fade"}},[t.show?n("div",{staticClass:"phone"},[n("div",{staticClass:"screen"},[n("div",{staticClass:"hair",staticStyle:{display:"flex","flex-direction":"row","justify-content":"center"}},[n("div",{staticClass:"air"})]),n("el-scrollbar",[n("div",{staticStyle:{height:"530px",display:"flex","flex-direction":"column","flex-wrap":"nowrap","align-items":"flex-start"}},[t._l(t.componentShowList,function(e){return n("div",{key:e.id,staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start",padding:"10px"}},[n(e.text,{tag:"component",attrs:{showID:e.id},on:{transferImagemapReply:t.parentGetImagemapReply}})],1)}),n("div",{staticStyle:{width:"300px",display:"flex","flex-direction":"column","flex-wrap":"nowrap","align-items":"flex-end"}},t._l(t.ReplyList,function(t,e){return n("div",{key:e+10,staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start",padding:"10px"}},[n("reply-text",{attrs:{replyText:t}})],1)}),0)],2)])],1)]):t._e()])],1),n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center","margin-left":"60px"}},[n("el-divider",{attrs:{"content-position":"left"}},[n("h1",[n("i",{staticClass:"el-icon-chat-dot-round"}),t._v("訊息清單\n      ")])]),n("div",{staticClass:"table_container",staticStyle:{width:"471px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%",cursor:"pointer"},attrs:{data:t.tableData,border:"",stripe:"","highlight-current-row":"","header-cell-class-name":"table-header-class"},on:{"row-click":t.onclick}},[n("el-table-column",{attrs:{label:"序號",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{cursor:"pointer"}},[t._v(t._s(e.$index+(t.paginations.pageIndex-1)*t.paginations.pageSize+1))])]}}])}),n("el-table-column",{attrs:{property:"name",label:"訊息名稱",width:"150",align:"center"}}),n("el-table-column",{attrs:{property:"event_time",label:"創建時間",width:"200",align:"center"}}),n("el-table-column",{attrs:{label:"刪除",width:"60",align:"center"}},[[n("span",{staticClass:"deleteIcon",staticStyle:{cursor:"pointer"}},[n("i",{staticClass:"el-icon-delete"})])]],2)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"pagination"},[t.paginations.total>0?n("el-pagination",{attrs:{background:"","page-sizes":t.paginations.pageSizes,"page-size":t.paginations.pageSize,layout:t.paginations.layout,total:t.paginations.total,"current-page":t.paginations.pageIndex},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}):t._e()],1)])],1)],1)],1),n("div",{staticStyle:{"margin-left":"50px"}},[n("transition",{attrs:{name:"slide-fade"}},[t.show_Preview?n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},[n("h1",{staticClass:"contain2"},[n("i",{staticClass:"el-icon-mobile"}),t._v("訊息預覽\n        ")]),n("div",{staticClass:"phone",attrs:{id:"1"}},[n("div",{staticClass:"screen"},[n("div",{staticClass:"hair",staticStyle:{display:"flex","flex-direction":"row","justify-content":"center"}},[n("div",{staticClass:"air"})]),n("el-scrollbar",[n("div",{staticStyle:{height:"530px",display:"flex","flex-direction":"column","flex-wrap":"nowrap","align-items":"flex-start"}},t._l(t.componentShowList_Preview,function(t){return n("div",{key:t.id,staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start",padding:"10px"}},[n(t.text,{ref:"componentShowList_Preview",refInFor:!0,tag:"component",attrs:{showID:t.id}})],1)}),0)])],1)])]):t._e()])],1)])},s=[],o=(n("f2bd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"uploader",class:{dragging:t.isDragging,hadFile:t.isHadFile},on:{dragenter:t.OnDragEnter,dragleave:t.OnDragLeave,dragover:function(t){t.preventDefault()},drop:t.onDrop}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.images.length,expression:"!images.length"}],staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("i",{staticClass:"el-icon-picture-outline"}),n("div",[t._v("拖曳圖片到此處")]),n("div",{staticClass:"file-input"},[n("label",{attrs:{for:"file"}},[t._v("選擇檔案")]),n("input",{attrs:{type:"file",id:"file"},on:{change:t.onInputChange}})]),n("div",{staticStyle:{color:"red"}},[t._v("圖片長寬須為 1 : 1")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.images.length,expression:"images.length"}],staticClass:"images-preview"},t._l(t.images,function(t,e){return n("div",{key:e,staticClass:"img-wrapper"},[n("img",{attrs:{src:t,alt:"Image Uplaoder "+e}})])}),0)])])}),a=[],l=(n("ac6a"),n("7f7f"),n("4917"),n("b54a"),n("cebe")),r=n.n(l),c={name:"imageUploader",props:{flexImageIndex:0,comID:0},data:function(){return{isDragging:!1,isHadFile:!1,dragCount:0,files:[],images:[],test:{file:""}}},methods:{submit:function(t){var e=this,n=new FormData;n.append("image",t),r()({method:"post",url:"https://api.imgur.com/3/image",data:n,headers:{Authorization:"Client-ID 144a5de7a410723"},mimeType:"multipart/form-data"}).then(function(t){console.log(t.data.data.link),console.log("sendEvent: getImageFileEvent"+e.comID+"_"+e.flexImageIndex),e.$bus.$emit("getImageFileEvent"+e.comID+"_"+e.flexImageIndex,t.data.data.link,e.flexImageIndex)})},OnDragEnter:function(t){return t.preventDefault(),this.dragCount++,this.isDragging=!0,!1},OnDragLeave:function(t){t.preventDefault(),this.dragCount--,this.dragCount<=0&&(this.isDragging=!1)},onInputChange:function(t){this.isHadFile=!0,console.log(t.target.files[0]),this.addImage(t.target.files[0]),this.submit(t.target.files[0])},onDrop:function(t){t.preventDefault(),t.stopPropagation(),this.isHadFile=!0,this.isDragging=!1;var e=t.dataTransfer.files;console.log(e),this.addImage(e[0]),this.submit(e[0])},addImage:function(t){var e=this;if(t.type.match("image.*")){this.files.push(t);new Image;var n=new FileReader;n.onload=function(t){return e.images.push(t.target.result)},console.log("sendEvent: imageEvent"+this.comID+"_"+this.flexImageIndex),this.$bus.$emit("imageEvent"+this.comID+"_"+this.flexImageIndex,this.images),n.readAsDataURL(t)}else this.$toastr.e("".concat(t.name," is not an image"))},getFileSize:function(t){var e=["Bytes","KB","MB","GB"],n=0;while(t>900)t/=1024,n++;return"".concat(Math.round(100*t)/100," ").concat(e[n])},upload:function(){var t=this,e=new FormData;this.files.forEach(function(t){e.append("images[]",t,t.name)}),r.a.post("/images-upload",e).then(function(e){t.$toastr.s("All images uplaoded successfully"),t.images=[],t.files=[]})}}},p=c,g=(n("2e23"),n("2877")),u=Object(g["a"])(p,o,a,!1,null,"6d9cb93c",null),h=u.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"通知訊息",prop:"input"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入文字",maxlength:"100"},model:{value:t.form.input,callback:function(e){t.$set(t.form,"input",e)},expression:"form.input"}})],1)],1),n("div",{staticClass:"uploader",class:{dragging:t.isDragging,hadFile:t.isHadFile},on:{dragenter:t.OnDragEnter,dragleave:t.OnDragLeave,dragover:function(t){t.preventDefault()},drop:t.onDrop}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.images.length,expression:"!images.length"}],staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("i",{staticClass:"el-icon-picture-outline"}),n("div",[t._v("拖曳圖片到此處")]),n("div",{staticClass:"file-input"},[n("label",{attrs:{for:"file"}},[t._v("選擇檔案")]),n("input",{attrs:{type:"file",id:"file"},on:{change:t.onInputChange}})]),n("div",{staticStyle:{color:"red"}},[t._v("圖片須為1040 x 1040")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.images.length,expression:"images.length"}],staticClass:"images-preview"},t._l(t.images,function(e,i){return n("div",{key:i,staticClass:"img-wrapper"},[n("el-tooltip",{attrs:{manual:!0,content:"請 框 取 點 擊 範 圍",placement:"top"},model:{value:t.showPrompt,callback:function(e){t.showPrompt=e},expression:"showPrompt"}},[n("img",{attrs:{src:e,alt:"Image Uplaoder "+i}})])],1)}),0),t._l(t.rect,function(e,i){return n("div",{key:i+50,staticClass:"clickbox",style:e.style,on:{click:function(t){e.visible=!0}}},[n("i",{staticClass:"el-icon-error",on:{click:function(e){return t.cancelRect(i)}}})])}),t._l(t.rect,function(e,i){return n("el-dialog",{key:i,attrs:{title:"點擊設定",visible:e.visible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(n){return t.$set(e,"visible",n)}}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start",padding:"5px"}},[n("p",{staticStyle:{padding:"5px"}},[t._v("互動區塊")]),n("el-radio",{staticStyle:{padding:"5px"},attrs:{label:"1"},model:{value:e.radio,callback:function(n){t.$set(e,"radio",n)},expression:"item.radio"}},[t._v("發送訊息")]),n("el-radio",{staticStyle:{padding:"5px"},attrs:{label:"2"},model:{value:e.radio,callback:function(n){t.$set(e,"radio",n)},expression:"item.radio"}},[t._v("開啟網頁")])],1),"1"==e.radio?n("div",{staticStyle:{padding:"5px"}},[n("p",{staticStyle:{"text-align":"left",padding:"5px"}},[t._v("訊息")]),n("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"30","show-word-limit":"",placeholder:"請輸訊息",type:"textarea"},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"item.text"}})],1):t._e(),"2"==e.radio?n("div",{staticStyle:{padding:"5px"}},[n("p",{staticStyle:{"text-align":"left",padding:"5px"}},[t._v("URL")]),n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸網址"},model:{value:e.URL,callback:function(n){t.$set(e,"URL",n)},expression:"item.URL"}}),n("add-label",{on:{transferLabels:t.parentGetLeabels}})],1):t._e()]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save(i)}}},[t._v("確 定")])],1)])}),n("canvas",{ref:"sketchpad",staticClass:"canvas",on:{mousedown:t.onCanvasMouseDown,mouseup:t.onCanvasMouseUp,mousemove:t.onCanvasMouseMove}})],2)],1)},m=[],f=(n("6b54"),n("53c8")),x={name:"imageUploader",props:{realIndex:0,comID:0},components:{addLabel:f["a"]},data:function(){var t=function(t,e,n){return e?n():n(new Error("請輸入訊息，最多100字"))};return{showPrompt:!1,canvasContext:{},rect:[],tempPosition:null,tempCanvas:null,isCanvasMouseDown:!1,drawing:!1,isDragging:!1,isHadFile:!1,dragCount:0,files:[],images:[],imageLink:"",tags:[],test:{file:""},form:{input:""},rules:{input:[{validator:t,trigger:"blur"}]}}},mounted:function(){this.setCanvas()},methods:{testclick:function(){},save:function(t){this.rect[t].visible=!1,this.$bus.$emit("imageMsgClickRectEvent"+this.comID,this.rect)},cancelRect:function(t){this.rect.splice(t,1),this.$bus.$emit("imageMsgClickRectEvent"+this.comID,this.rect)},setCanvas:function(){var t=this.$refs["sketchpad"];t.width=400,t.height=400;var e=t.getContext("2d");e.lineCap="round",e.lineJoin="round",this.canvasContext=e},post2DB:function(){console.log("imageMsg post2DB Start");var t,e={type:"imagemap",altText:this.form.input,baseUrl:this.imageLink,baseSize:{width:1040,height:1040},actions:[]};for(t=0;t<this.rect.length;t++)"1"==this.rect[t].radio?e.actions[t]={type:"message",text:this.rect[t].text,area:{x:this.rect[t].position.x/400*1040,y:this.rect[t].position.y/400*1040,width:this.rect[t].position.width/400*1040,height:this.rect[t].position.height/400*1040},label_id:[]}:e.actions[t]={type:"uri",linkUri:this.rect[t].URL,area:{x:this.rect[t].position.x/400*1040,y:this.rect[t].position.y/400*1040,width:this.rect[t].position.width/400*1040,height:this.rect[t].position.height/400*1040},label_id:this.tags};console.log("message"),console.log(e),this.$emit("getJSON",e,this.realIndex)},submit:function(t){var e=this,n=new FormData;n.append("image",t),r()({method:"post",url:"https://api.imgur.com/3/image",data:n,headers:{Authorization:"Client-ID 144a5de7a410723"},mimeType:"multipart/form-data"}).then(function(t){console.log(t.data.data.link),e.imageLink=t.data.data.link})},OnDragEnter:function(t){return t.preventDefault(),this.dragCount++,this.isDragging=!0,!1},OnDragLeave:function(t){t.preventDefault(),this.dragCount--,this.dragCount<=0&&(this.isDragging=!1)},onInputChange:function(t){this.isHadFile=!0,console.log(t.target.files[0]),this.addImage(t.target.files[0]),this.submit(t.target.files[0])},onDrop:function(t){t.preventDefault(),t.stopPropagation(),this.isHadFile=!0,this.isDragging=!1;var e=t.dataTransfer.files;console.log(e),this.addImage(e[0]),this.submit(e[0])},addImage:function(t){var e=this;this.files.push(t);new Image;var n=new FileReader;n.onload=function(t){return e.images.push(t.target.result)},console.log("sendEvent: imageMsgEvent"+this.comID),this.$bus.$emit("imageMsgEvent"+this.comID,this.images),n.readAsDataURL(t),this.drawing=!0,this.showPrompt=!0},getFileSize:function(t){var e=["Bytes","KB","MB","GB"],n=0;while(t>900)t/=1024,n++;return"".concat(Math.round(100*t)/100," ").concat(e[n])},upload:function(){var t=this,e=new FormData;this.files.forEach(function(t){e.append("images[]",t,t.name)}),r.a.post("/images-upload",e).then(function(e){t.$toastr.s("All images uplaoded successfully"),t.images=[],t.files=[]})},onCanvasMouseDown:function(t){if(1==this.drawing){this.isCanvasMouseDown=!0,this.setTempCanvas();var e=this.getCanvasMousePosition(t.clientX,t.clientY);this.setCanvasTempPosition(e.x,e.y)}},onCanvasMouseUp:function(t){if(1==this.drawing){this.isCanvasMouseDown=!1;var e=this.getCanvasMousePosition(t.clientX,t.clientY),n={x:this.tempPosition.x,y:this.tempPosition.y,width:e.x-this.tempPosition.x,height:e.y-this.tempPosition.y};if(n.width<0&&(n.width=0-n.width,n.x-=n.width),n.height<0&&(n.height=0-n.height,n.y-=n.height),n.width<30||n.height<30)return this.$message.error("選取範圍過小"),void this.canvasContext.putImageData(this.tempCanvas,0,0);var i={left:n.x.toString()+"px",top:n.y.toString()+"px",width:n.width.toString()+"px",height:n.height.toString()+"px"},s={};s.position=n,s.style=i,s.visible=!1,s.radio="1",s.text="",s.URL="",this.rect.push(s),console.log(this.rect),this.canvasContext.putImageData(this.tempCanvas,0,0),this.$bus.$emit("imageMsgClickRectEvent"+this.comID,this.rect)}},onCanvasMouseMove:function(t){if(1==this.isCanvasMouseDown&&1==this.drawing){var e=this.getCanvasMousePosition(t.clientX,t.clientY),n=this.canvasContext;n.beginPath(),n.lineWidth=2*this.currentSize,n.strokeStyle="#04ce2f";var i=this.tempPosition.x,s=this.tempPosition.y,o=e.x-i,a=e.y-s;n.putImageData(this.tempCanvas,0,0),n.rect(i,s,o,a),n.stroke()}},getCanvasMousePosition:function(t,e){var n=this.canvasContext.canvas.getBoundingClientRect(),i=t-n.x,s=e-n.y;return{x:i,y:s}},setCanvasTempPosition:function(t,e){this.tempPosition={x:t,y:e}},setTempCanvas:function(){var t=this.canvasContext,e=t.canvas,n=t.getImageData(0,0,e.width,e.height);this.tempCanvas=n},handleClose:function(t){this.$confirm("確認關閉?").then(function(e){t()}).catch(function(t){})},parentGetLeabels:function(t){this.tags=t}}},v=x,b=(n("f190"),Object(g["a"])(v,d,m,!1,null,"2cff3022",null)),y=b.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"uploader",class:{dragging:t.isDragging,hadFile:t.isHadFile},on:{dragenter:t.OnDragEnter,dragleave:t.OnDragLeave,dragover:function(t){t.preventDefault()},drop:t.onDrop}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.images.length,expression:"!images.length"}],staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("i",{staticClass:"el-icon-picture-outline"}),n("div",[t._v("拖曳圖片到此處")]),n("div",{staticClass:"file-input"},[n("label",{attrs:{for:"file"}},[t._v("選擇檔案")]),n("input",{attrs:{type:"file",id:"file"},on:{change:t.onInputChange}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.images.length,expression:"images.length"}],staticClass:"images-preview"},t._l(t.images,function(t,e){return n("div",{key:e,staticClass:"img-wrapper"},[n("img",{attrs:{src:t,alt:"Image Uplaoder "+e}})])}),0)])])},L=[],I={name:"imageUploader",props:{comID:0,realIndex:0},data:function(){return{isDragging:!1,isHadFile:!1,dragCount:0,files:[],images:[],imageLink:"",test:{file:""}}},methods:{post2DB:function(){console.log("image post2DB Start");var t={type:"image",originalContentUrl:this.imageLink,previewImageUrl:this.imageLink};console.log("message"),console.log(t),this.$emit("getJSON",t,this.realIndex)},submit:function(t){var e=this,n=new FormData;n.append("image",t),r()({method:"post",url:"https://api.imgur.com/3/image",data:n,headers:{Authorization:"Client-ID 144a5de7a410723"},mimeType:"multipart/form-data"}).then(function(t){console.log(t.data.data.link),e.imageLink=t.data.data.link})},OnDragEnter:function(t){return t.preventDefault(),this.dragCount++,this.isDragging=!0,!1},OnDragLeave:function(t){t.preventDefault(),this.dragCount--,this.dragCount<=0&&(this.isDragging=!1)},onInputChange:function(t){this.isHadFile=!0,console.log(t.target.files[0]),this.addImage(t.target.files[0]),this.submit(t.target.files[0])},onDrop:function(t){t.preventDefault(),t.stopPropagation(),this.isHadFile=!0,this.isDragging=!1;var e=t.dataTransfer.files;console.log(e),this.addImage(e[0]),this.submit(e[0])},addImage:function(t){var e=this;if(t.type.match("image.*")){this.files.push(t);new Image;var n=new FileReader;n.onload=function(t){return e.images.push(t.target.result)},console.log("sendEvent: imageEvent"+this.comID),this.$bus.$emit("imageEvent"+this.comID,this.images),n.readAsDataURL(t)}else this.$toastr.e("".concat(t.name," is not an image"))},getFileSize:function(t){var e=["Bytes","KB","MB","GB"],n=0;while(t>900)t/=1024,n++;return"".concat(Math.round(100*t)/100," ").concat(e[n])},upload:function(){var t=this,e=new FormData;this.files.forEach(function(t){e.append("images[]",t,t.name)}),r.a.post("/images-upload",e).then(function(e){t.$toastr.s("All images uplaoded successfully"),t.images=[],t.files=[]})}}},C=I,D=(n("dc88"),Object(g["a"])(C,w,L,!1,null,"77b88e52",null)),_=D.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"flex-start"}},[n("div",{staticStyle:{display:"flex","flex-direction":"row"}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"通知訊息",prop:"input"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"請輸入文字",maxlength:"100"},model:{value:t.form.input,callback:function(e){t.$set(t.form,"input",e)},expression:"form.input"}})],1)],1)],1),n("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[n("div",{ref:"father",staticClass:"allFlex"},[n("div",{ref:"child",staticClass:"slideContain",style:t.position},t._l(t.flexList,function(e,i){return n("flex",{key:e,ref:"flex",refInFor:!0,attrs:{comID:t.comID,comIndex:e,deleteIndex:i},on:{deleteFlex:t.parentDeleteFlex,getFlexTitle:t.parentGetFlexTitle,getFlexText:t.parentGetFlexText,getFlexButtonGroups:t.parentGetFlexButtonGroups}})}),1)]),t.flexList.length>1?n("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start","margin-top":"10px"}},t._l(t.flexList,function(e,i){return n("el-button",{key:e,staticClass:"selectButton",attrs:{size:"small"},on:{click:function(e){return t.select(i)}}},[t._v(t._s(e))])}),1):t._e()])]),n("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.addMultiFlex()}}})])},k=[],$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fillcontain",staticStyle:{display:"flex","flex-wrap":"nowrap","flex-direction":"column","justify-content":"center","align-items":"flex-start"}},[n("div",{ref:"contain",staticClass:"contain"},[n("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[n("image-uploader",{attrs:{comID:t.comID,flexImageIndex:t.comIndex}}),n("i",{staticClass:"el-icon-delete-solid delete-icon",on:{click:function(e){return t.deleteFlex(t.deleteIndex)}}})],1),n("el-divider"),n("div",{staticClass:"sharedWidth"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{prop:"title"}},[n("el-input",{attrs:{placeholder:"請輸入標題",maxlength:"50","show-word-limit":""},on:{input:t.showTitle,change:t.getFlexTitle},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("el-form-item",{attrs:{prop:"text"}},[n("el-input",{attrs:{placeholder:"請輸入敘述",maxlength:"500",rows:"3",autosize:{minRows:3,maxRows:3},"show-word-limit":"",type:"textarea"},on:{input:t.showText,change:t.getFlexText},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1)],1)],1),n("el-divider"),n("ul",t._l(t.buttonList,function(e,i){return n("li",{key:e},[n("div",{staticStyle:{display:"flex","flex-wrap":"nowrap","flex-direction":"row","justify-content":"flex-start","align-items":"center"}},[n("add-button-text",{staticClass:"sharedWidth",attrs:{comID:t.comID,comIndex:t.comIndex,btnIndex:e,btnBackgroundIndex:i},on:{getFlexButton:t.parentGetFlexButton}}),n("i",{staticClass:"el-icon-delete-solid delete-icon",on:{click:function(e){return t.deleteButton(i)}}})],1)])}),0),n("el-button",{staticClass:"sharedWidth addButton",on:{click:t.addButton}},[t._v("+ 增加按鈕")])],1)])},E=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","justify-content":"center"},attrs:{id:"my-strictly-unique-vue-upload-multiple-image"}},[n("el-popover",{attrs:{placement:"right",title:"編輯按鈕",width:"260",hight:"800"},on:{hide:t.getFlexButton},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("hr"),n("div",{staticStyle:{padding:"5px"}},[n("p",[t._v("按鈕文字")]),n("el-input",{attrs:{maxlength:"10","show-word-limit":""},on:{change:t.getButtonName,input:t.showButton},model:{value:t.btnNameInput,callback:function(e){t.btnNameInput=e},expression:"btnNameInput"}})],1),n("div",{staticStyle:{"text-align":"left",margin:"0",padding:"5px"}},[n("p",[t._v("互動區塊")]),n("el-radio",{attrs:{label:"1"},model:{value:t.button.radio,callback:function(e){t.$set(t.button,"radio",e)},expression:"button.radio"}},[t._v("發送訊息")]),n("el-radio",{attrs:{label:"2"},model:{value:t.button.radio,callback:function(e){t.$set(t.button,"radio",e)},expression:"button.radio"}},[t._v("開啟網頁")])],1),"1"==this.button.radio?n("div",{staticStyle:{padding:"5px"}},[n("p",[t._v("訊息")]),n("el-input",{attrs:{maxlength:"30","show-word-limit":"",placeholder:"請輸訊息",type:"textarea"},on:{change:t.getButtonMsg},model:{value:t.btnMsgInput,callback:function(e){t.btnMsgInput=e},expression:"btnMsgInput"}})],1):t._e(),"2"==this.button.radio?n("div",{staticStyle:{padding:"5px"}},[n("p",[t._v("URL")]),n("el-input",{attrs:{placeholder:"請輸網址"},on:{change:t.getButtonURL},model:{value:t.inputUrl,callback:function(e){t.inputUrl=e},expression:"inputUrl"}})],1):t._e(),n("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"flex-start"}},[n("add-label",{on:{transferLabels:t.parentGetLeabels}}),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.visible=!1}}},[t._v("確定")])],1),n("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(this.btnNameInput))])],1)],1)},F=[],T={name:"addButtonText",props:{parentInput:"",parentInputUrl:"",btnIndex:0,btnBackgroundIndex:0,comID:0,comIndex:0},components:{addLabel:f["a"]},mounteds:{handleClose:function(t){this.labels.splice(this.labels.indexOf(t),1)}},data:function(){return{btnNameInput:"Button #"+this.btnIndex,btnInfoInput:"您有新訊息！",btnMsgInput:"",inputUrl:"",visible:!1,button:{name:"Button #"+this.btnIndex,infoMsg:"您有新訊息！",radio:"1",Msg:"預設訊息",URL:"",tags:[]}}},methods:{showButton:function(){this.$bus.$emit("modifyButtonsTextEvevt"+this.comID+"_"+this.comIndex,this.btnNameInput,this.btnBackgroundIndex)},getFlexButton:function(){console.log("HIDE and btnBackgroundIndex: "+this.btnBackgroundIndex),console.log(this.button),this.$emit("getFlexButton",this.button,this.btnBackgroundIndex)},getButtonName:function(){this.button.name=this.btnNameInput,console.log("button.name: "+this.button.name)},getButtonInfoMsg:function(){this.button.infoMsg=this.btnInfoInput,console.log("button.infoMsg: "+this.button.infoMsg)},getButtonMsg:function(){this.button.Msg=this.btnMsgInput,console.log("button.Msg: "+this.button.Msg)},getButtonURL:function(){this.button.URL=this.inputUrl,console.log("button.URL: "+this.button.URL)},parentGetLeabels:function(t){this.button.tags=t,console.log("button.tags: "+this.button.tags)}}},M=T,U=(n("171e"),Object(g["a"])(M,B,F,!1,null,"9921dea6",null)),R=U.exports,O={name:"flex",props:{comIndex:0,comID:0,deleteIndex:0},data:function(){var t=function(t,e,n){return e?n():n(new Error("請輸入標題"))},e=function(t,e,n){return e?n():n(new Error("請輸入敘述"))};return{resLink:"",empty:"",buttonCntLimit:5,buttonList:[1],buttonTextList:["Button #1"],buttons:[],form:{title:"",text:""},rules:{title:[{validator:t,trigger:"blur"}],text:[{validator:e,trigger:"blur"}]}}},components:{addButtonText:R,imageUploader:h},methods:{checkFlexForm:function(){console.log("ccheck form in flex"),this.$refs["form"].validate(function(t){return t?(console.log("form success"),!0):(console.log("form fail f"),!1)})},showTitle:function(){console.log("send: flexTitleEvent"+this.comID+"_"+this.comIndex,this.form.title),this.$bus.$emit("flexTitleEvent"+this.comID+"_"+this.comIndex,this.form.title)},showText:function(){console.log("send: flexTextEvent"+this.comID+"_"+this.comIndex,this.form.title),this.$bus.$emit("flexTextEvent"+this.comID+"_"+this.comIndex,this.form.text)},getFlexTitle:function(){this.$emit("getFlexTitle",this.form.title,this.comIndex)},getFlexText:function(){this.$emit("getFlexText",this.form.text,this.comIndex)},parentGetFlexButton:function(t,e){this.buttons[e]=t,console.log("Get button: "+this.buttons[e]),console.log(this.buttons[e]),this.$emit("getFlexButtonGroups",this.buttons,this.comIndex)},deleteFlex:function(t){console.log("deleteFlex",t),this.$emit("deleteFlex",t)},deleteButton:function(t){this.buttonList.splice(t,1),this.buttonTextList.splice(t,1),console.log("delete ",t),console.log("List ",this.buttonList),this.sendButtonTextList()},addButton:function(){var t;for(t=1;t<this.buttonCntLimit+1;t++)if(-1==this.buttonList.indexOf(t)){this.buttonList.push(t),this.buttonTextList.push("Button #"+t),console.log("add ",t);break}console.log("List ",this.buttonList),this.sendButtonTextList()},sendButtonTextList:function(){this.$bus.$emit("showButtonsTextEvevt"+this.comID+"_"+this.comIndex,this.buttonTextList)}}},j=O,A=(n("d869"),Object(g["a"])(j,$,E,!1,null,"f2b33878",null)),P=A.exports,G=(n("6444"),{name:"addMultiFlex",components:{flex:P},props:{comID:0,realIndex:0},data:function(){var t=function(t,e,n){return e?n():n(new Error("請輸入訊息，最多100字"))};return{form:{input:""},rules:{input:[{validator:t,trigger:"blur"}]},position:{"margin-left":"0px"},flexCnt:1,flexCntLimit:5,flexList:[1],imageLinks:[],titles:[],texts:[],buttonGroups:[]}},created:function(){var t,e=this;for(this.$bus.$emit("specialEvent"+this.comID,this.comID,this.flexList),t=1;t<this.flexCntLimit+1;t++)console.log("addListen: getImageFileEvent"+this.comID+"_"+t),this.$bus.$on("getImageFileEvent"+this.comID+"_"+t,function(t,n){e.imageLinks[n-1]=t,console.log("Get Image: "+e.imageLinks[n-1])})},beforeDestroy:function(){var t;for(t=1;t<this.flexCntLimit+1;t++)this.$bus.$off("getImageFileEvent"+this.comID+"_"+t)},methods:{select:function(t){var e=350-280*this.flexList.length,n=e+280*(this.flexList.length-(t+1))-20;0==t?this.position={"margin-left":"0px"}:t==this.flexList.length-1?this.position={"margin-left":e.toString()+"px"}:this.position={"margin-left":n.toString()+"px"}},post2DB:function(){console.log("multiFlex post2DB Start");var t,e=[];for(t=0;t<this.flexList.length;t++){var n,i=[];for(console.log(this.buttonGroups),console.log(t),console.log(this.buttonGroups[t]),n=0;n<this.buttonGroups[t].length;n++){var s;s=1==this.buttonGroups[t][n].radio?{type:"postback",label:this.buttonGroups[t][n].name,text:this.buttonGroups[t][n].Msg,label_id:this.buttonGroups[t][n].tags}:{type:"uri",label:this.buttonGroups[t][n].name,uri:this.buttonGroups[t][n].URL,label_id:this.buttonGroups[t][n].tags};var o={type:"button",style:"primary",action:s};i.push(o)}console.log(i);var a={type:"bubble",hero:{type:"image",url:this.imageLinks[t],size:"full",aspectRatio:"20:13",aspectMode:"cover"},body:{type:"box",layout:"vertical",contents:[{type:"text",text:this.titles[t],weight:"bold",color:"#1DB446",size:"sm",wrap:!0},{type:"text",text:this.texts[t],weight:"bold",size:"md",margin:"md",wrap:!0}]},footer:{type:"box",layout:"vertical",spacing:"md",contents:i}};e.push(a),console.log(e)}var l={type:"flex",altText:this.form.input,contents:1==this.flexList.length?e[0]:{type:"carousel",contents:e}};console.log(l),this.$emit("getJSON",l,this.realIndex)},addMultiFlex:function(){var t;for(t=1;t<this.flexCntLimit+1;t++)if(-1==this.flexList.indexOf(t)){this.flexList.push(t),this.$bus.$emit("specialEvent"+this.comID,this.comID,this.flexList);break}var e=350-280*this.flexList.length;this.position={"margin-left":e.toString()+"px"}},parentDeleteFlex:function(t){this.flexList.splice(t,1),0==this.flexList.length&&this.$emit("deleteMultiflexComponent",this.comID),1==this.flexList.length&&(this.position={"margin-left":"0px"})},parentGetFlexTitle:function(t,e){this.titles[e-1]=t,console.log("Get title: "+this.titles[e-1])},parentGetFlexText:function(t,e){this.texts[e-1]=t,console.log("Get text: "+this.texts[e-1])},parentGetFlexButtonGroups:function(t,e){this.buttonGroups[e-1]=t,console.log("Get buttonGroup: "+(e-1)),console.log(this.buttonGroups[e-1])}}}),N=G,H=(n("47aa"),Object(g["a"])(N,S,k,!1,null,"4ee3af10",null)),z=H.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center"}},[n("div",{staticClass:"input-wrapper"},[n("div",{staticClass:"inputContent",attrs:{maxlength:"1500",id:"common_chat_input",contenteditable:"true"},on:{paste:function(e){return e.stopPropagation(),t.inputContent_paste(e)},drop:t.inputContent_drop,keydown:t.inputContent_keydown,mouseup:t.inputContent_mouseup,mouseleave:t.inputContent_mouseup}})]),n("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"flex-end"}},[n("el-dialog",{attrs:{title:"加入網址",visible:t.linkDialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.linkDialogVisible=e}}},[n("p",{staticStyle:{"text-align":"left",padding:"5px"}},[t._v("URL")]),n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸網址"},model:{value:t.inputUrl,callback:function(e){t.inputUrl=e},expression:"inputUrl"}}),n("add-label",{on:{transferLabels:t.parentGetLeabels}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.linkDialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.addLink}},[t._v("確 定")])],1)],1),n("div",{staticClass:"tool"},[n("i",{staticClass:"el-icon-link",staticStyle:{cursor:"pointer"},on:{click:function(e){t.linkDialogVisible=!0}}}),n("el-popover",{attrs:{placement:"bottom",width:"210",trigger:"click"}},[n("el-scrollbar",[n("div",{staticStyle:{height:"200px"}},t._l(175,function(e){return n("img",{key:e,staticStyle:{width:"20%",cursor:"pointer",padding:"1px"},attrs:{src:t.imgSrc+t.imgTable[e]},on:{click:function(n){return t.addEmoji(e)}}})}),0)]),n("i",{staticClass:"el-icon-basketball",staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})],1),n("i",{staticClass:"el-icon-refresh",staticStyle:{cursor:"pointer"},on:{click:t.refresh}})],1)],1)])},J=[],q=(n("a481"),{name:"addText",props:{parentInput:"",parentInputUrl:"",comID:0,realIndex:0},components:{addLabel:f["a"]},data:function(){var t=function(t,e,n){return e?n():n(new Error("請輸入訊息，最多200字"))};return{imgSrc:"https://storage.cloud.google.com/line_emoji/",imgList:[],indexList:[],inputContent_setTimeout:null,selectionRange:null,shortcutMsgList:[],imgViewDialogVisible:!1,imgViewDialog_imgSrc:"",inputContent:"",inputUrl:"",urlList:[],tagList:[],urlID:0,urlIDList:[],urlCount:1,tags:[],linkDialogVisible:!1,form:{input:"",inputTest:""},rules:{input:[{validator:t,trigger:"blur"}],inputTest:[{validator:t,trigger:"blur"}]},rangeStartOffset:0,textNode:"",range:"",imgTable:["","0x100078.png","0x100079.png","0x10007A.png","0x10007B.png","0x10007B.png","0x10007B.png","0x10007E.png","0x10008C.png","0x10008D.png","0x10008E.png","0x10008F.png","0x100090.png","0x100091.png","0x100092.png","0x100093.png","0x100094.png","0x100095.png","0x10007F.png","0x100080.png","0x100081.png","0x100082.png","0x100083.png","0x100096.png","0x100097.png","0x100098.png","0x100099.png","0x10009A.png","0x10009B.png","0x10009C.png","0x10009D.png","0x10009E.png","0x100084.png","0x100085.png","0x100086.png","0x100087.png","0x100088.png","0x100089.png","0x10008A.png","0x10008B.png","0x10009F.png","0x100001.png","0x100002.png","0x100003.png","0x100004.png","0x100005.png","0x100006.png","0x100007.png","0x100008.png","0x100009.png","0x10000A.png","0x10000B.png","0x10000C.png","0x10000D.png","0x10000E.png","0x10000F.png","0x100010.png","0x100011.png","0x100012.png","0x100013.png","0x100014.png","0x100015.png","0x100016.png","0x100017.png","0x100018.png","0x100019.png","0x10001A.png","0x10001B.png","0x10001C.png","0x10001D.png","0x10001E.png","0x10001F.png","0x100020.png","0x100021.png","0x100022.png","0x100023.png","0x10005D.png","0x10005F.png","0x10005E.png","0x1000A0.png","0x1000A1.png","0x100024.png","0x1000A2.png","0x1000A3.png","0x1000A4.png","0x1000A5.png","0x1000A6.png","0x1000A7.png","0x100026.png","0x100027.png","0x100029.png","0x10002A.png","0x10002B.png","0x10002C.png","0x10002D.png","0x10002E.png","0x10002F.png","0x10003A.png","0x1000A8.png","0x1000A9.png","0x1000AA.png","0x1000AB.png","0x1000AC.png","0x100033.png","0x1000AD.png","0x100030.png","0x100031.png","0x100032.png","0x1000AE.png","0x100035.png","0x100036.png","0x100039.png","0x100037.png","0x100038.png","0x1000AF.png","0x1000B0.png","0x1000B1.png","0x1000B2.png","0x1000B3.png","0x10003B.png","0x10003C.png","0x10003D.png","0x1000B4.png","0x100040.png","0x100041.png","0x100042.png","0x100043.png","0x100044.png","0x100045.png","0x1000B5.png","0x100047.png","0x100049.png","0x10004A.png","0x10004B.png","0x10004C.png","0x10004D.png","0x10004E.png","0x10004F.png","0x100050.png","0x100051.png","0x100053.png","0x100054.png","0x100055.png","0x100056.png","0x1000B6.png","0x100057.png","0x100058.png","0x100059.png","0x1000B7.png","0x10005B.png","0x10005C.png","0x100060.png","0x100061.png","0x100062.png","0x1000B8.png","0x1000B9.png","0x100064.png","0x100065.png","0x100066.png","0x100067.png","0x100068.png","0x100069.png","0x10006A.png","0x10006B.png","0x10006C.png","0x10006D.png","0x10006E.png","0x10006F.png","0x100070.png","0x100071.png","0x100072.png","0x100073.png","0x100074.png","0x100075.png","0x100076.png","0x100077.png"]}},methods:{refresh:function(){this.inputContent="",document.getElementById("common_chat_input").innerHTML="",this.$bus.$emit("textEvent"+this.comID,""),this.urlList=[],this.tagList=[]},getInputPosition:function(){var t,e;t=window.getSelection(),e=t.getRangeAt(0),this.rangeStartOffset=e.startOffset,this.textNode=e.startContainer,this.range=e},testclick:function(){this.setInputContentByDiv(),console.log(this.inputContent),console.log(this.urlList),console.log(this.tagList),console.log(this.rangeStartOffset),console.log(this.textNode)},addEmoji:function(t){var e="___emoji___";this.setInputDiv(e.replace(/\n/g,"").replace(/\r/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.range);var n="https://storage.cloud.google.com/line_emoji/"+this.imgTable[t],i='<img style="width: 30px;margin-bottom:-8px;" src="'+n+'" >',s=document.getElementById("common_chat_input").innerHTML.replace("___emoji___",i);document.getElementById("common_chat_input").innerHTML=s,this.$bus.$emit("textEvent"+this.comID,s)},addLink:function(){this.linkDialogVisible=!1;var t="___url___";this.setInputDiv(t.replace(/\n/g,"").replace(/\r/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.range);var e='<div class="tag" style="background: #9cb7f3;" contenteditable="false" >網址#'+this.urlCount+"#</div>";this.urlList[this.urlCount]=this.inputUrl,this.tagList[this.urlCount]=JSON.parse(JSON.stringify(this.tags)),this.urlCount++;var n=document.getElementById("common_chat_input").innerHTML.replace("___url___",e);document.getElementById("common_chat_input").innerHTML=n,console.log(n),this.$bus.$emit("textEvent"+this.comID,n)},inputContent_paste:function(t){var e=this,n=!1;if(t.clipboardData&&t.clipboardData.items.length>0){for(var i=0;i<t.clipboardData.items.length;i++){var s=t.clipboardData.items[i];if("file"==s.kind&&s.type.indexOf("image")>=0){var o=s.getAsFile(),a=new FormData;a.append("uploadFile",o),this.$http.uploadFile({url:"/upload",params:a,successCallback:function(t){console.log(o),console.log(t),document.getElementById("common_chat_opr_fileUpload").value="",e.sendMsg({contentType:"image",fileName:t.fileName,fileUrl:t.fileUrl,state:"success"})}}),n=!0}}if(!n){t.stopPropagation(),t.preventDefault();var l=t.clipboardData.getData("text/plain"),r=document.createElement("span");r.innerHTML=l;var c=r.innerText;this.setInputDiv(c.replace(/\n/g,"").replace(/\r/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}}},inputContent_drop:function(t){var e=this;setTimeout(function(){e.setInputContentByDiv()},100)},inputContent_keydown:function(t){this.getInputPosition(),this.setInputContentSelectRange();var e=this;clearTimeout(this.$data.inputContent_setTimeout),this.$data.inputContent_setTimeout=setTimeout(function(){e.setInputContentByDiv()},200)},inputContent_mouseup:function(t){this.getInputPosition(),this.setInputContentSelectRange()},setInputContentSelectRange:function(){if(window.getSelection&&window.getSelection().rangeCount>0){var t=window.getSelection().getRangeAt(0);"#text"==t.commonAncestorContainer.nodeName&&t.commonAncestorContainer.parentElement&&"common_chat_input"==t.commonAncestorContainer.parentElement.id?this.$data.selectionRange=t:"common_chat_input"==t.commonAncestorContainer.id&&(this.$data.selectionRange=t)}},setInputContentByDiv:function(){var t=this,e=document.getElementById("common_chat_input").innerHTML;this.$bus.$emit("textEvent"+this.comID,e);var n=e.replace(/<img.+text=\"(.+?)\".+>/g,"[$1]").replace(/<div><br><\/div>/g,"\\n").replace(/<div class=\"tag\".+?網址#/g,"__url__").replace(/#<\/div>/g,"__url__").replace(/<img.+?0x1000/g,"\\uDBC0\\uDC").replace(/.png.+?>/g,"").replace(/&nbsp;/g," ").replace(/<div>/g,"\\n").replace(/<\/div>/g,"").replace(/<br>/g,"").replace(/%/g,"%%");if(n.length>500){document.getElementById("common_chat_input").innerHTML="";var i=n.substr(0,499).replace(/\[(.+?)\]/g,function(e,n){return t.$refs.qqemoji.getImgByFaceName(n)});this.setInputDiv(i)}this.inputContent=n},setInputDiv:function(t,e){if(null!=this.$data.selectionRange){var n,i;if(window.getSelection?(window.getSelection().removeAllRanges(),window.getSelection().addRange(this.$data.selectionRange)):this.$data.selectionRange&&this.$data.selectionRange.select(),t=this.getqqemojiEmoji(t),window.getSelection){if(n=window.getSelection(),n.getRangeAt&&n.rangeCount){var s;if(i=e||n.getRangeAt(0),i.deleteContents(),i.createContextualFragment)s=i.createContextualFragment(t);else{s=document.createDocumentFragment();var o=document.createElement("div");o.innerHTML=t;for(var a=0,l=o.children.length;a<l;a++)s.appendChild(o.firstChild)}var r=s.lastChild;i.insertNode(s),i.setStartAfter(r),n.removeAllRanges(),n.addRange(i)}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(imgStr);this.setInputContentByDiv()}else document.getElementById("common_chat_input").focus()},getqqemojiEmoji:function(t){if(void 0!=t){var e=this;return t.replace(/\[(.+?)\]/g,function(t,n){return e.$refs.qqemoji.getImgByFaceName(n)})}},post2DB:function(){console.log("text post2DB Start"),this.setInputContentByDiv();var t={type:"text",text:this.inputContent,urlList:this.urlList,tagList:this.tagList,htmlStr:document.getElementById("common_chat_input").innerHTML.replace(/\"/g,'\\"').replace(/%/g,"%%").replace(/\\/g,"\\\\")};console.log("message"),console.log(t),this.$emit("getJSON",t,this.realIndex)},handleClose:function(t){this.$confirm("確認關閉?").then(function(e){t()}).catch(function(t){})},parentGetLeabels:function(t){this.tags=t}}}),W=q,K=(n("2135"),Object(g["a"])(W,V,J,!1,null,"025c8d2d",null)),X=K.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[0==t.videoLink.length?n("div",{staticClass:"uploader",class:{dragging:t.isDragging,hadFile:t.isHadFile},on:{dragenter:t.OnDragEnter,dragleave:t.OnDragLeave,dragover:function(t){t.preventDefault()},drop:t.onDrop}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"show",rawName:"v-show",value:!t.images.length,expression:"!images.length"}],staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("i",{staticClass:"el-icon-video-camera"}),n("div",[t._v("拖曳影片到此處")]),n("div",{staticClass:"file-input"},[n("label",{attrs:{for:"file"}},[t._v("選擇檔案")]),n("input",{attrs:{type:"file",id:"file",accept:"video/*"},on:{change:t.onInputChange}})]),n("div",{staticStyle:{color:"red"}},[t._v("影片須小於10MB")])])]):n("video",{attrs:{width:"320",height:"240",controls:""}},[n("source",{attrs:{src:t.videoLink,type:"video/mp4"}})]),n("div",{staticStyle:{padding:"10px"}},[t._m(0),n("div",{staticClass:"choise"},[n("label",[t._v("選擇檔案")]),n("input",{attrs:{type:"file",accept:"image/*"},on:{change:t.testfunc}}),t.test.file?n("div",{staticClass:"text"},[t._v(t._s(this.test.file["name"]))]):n("div",{staticClass:"text"},[t._v("未選擇任何檔案")])])])])},Q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[t._v("\n      上傳預覽圖片\n      "),n("span",{staticStyle:{color:"red"}},[t._v("240 x 240")])])}],Z=n("5f87"),tt={name:"videoUpload",props:{comID:0,realIndex:0},data:function(){return{loading:!1,videoLink:"",isDragging:!1,isHadFile:!1,dragCount:0,files:[],images:[],imageLink:"",test:{file:""}}},methods:{post2DB:function(){console.log("video post2DB Start");var t={type:"video",originalContentUrl:this.videoLink,previewImageUrl:this.imageLink};console.log("message"),console.log(t),this.$emit("getJSON",t,this.realIndex)},testfunc:function(t){var e=this;this.test.file=t.target.files[0];var n=new FormData;n.append("image",this.test.file),r()({method:"post",url:"https://api.imgur.com/3/image",data:n,headers:{Authorization:"Client-ID 144a5de7a410723"},mimeType:"multipart/form-data"}).then(function(t){console.log(t.data.data.link),e.imageLink=t.data.data.link,e.$bus.$emit("vedioPreviewUrlEvent"+e.comID,e.imageLink)})},submit:function(t){var e=this;this.loading=!0;var n=new FormData;n.append("file",t);var i=Object(Z["a"])("Token");r()({method:"post",url:"https://theflowchat.com:5000/video_link",data:n,headers:{"Content-Type":"multipart/form-data","x-access-token":i}}).then(function(t){console.log(t.data.video_link),e.videoLink=t.data.video_link,e.$bus.$emit("videoUrlEvent"+e.comID,e.videoLink),e.loading=!1})},OnDragEnter:function(t){return t.preventDefault(),this.dragCount++,this.isDragging=!0,!1},OnDragLeave:function(t){t.preventDefault(),this.dragCount--,this.dragCount<=0&&(this.isDragging=!1)},onInputChange:function(t){this.isHadFile=!0,console.log(t.target.files[0]),this.submit(t.target.files[0])},onDrop:function(t){t.preventDefault(),t.stopPropagation(),this.isHadFile=!0,this.isDragging=!1;var e=t.dataTransfer.files;console.log(e),this.submit(e[0])},getFileSize:function(t){var e=["Bytes","KB","MB","GB"],n=0;while(t>900)t/=1024,n++;return"".concat(Math.round(100*t)/100," ").concat(e[n])}}},et=tt,nt=(n("09fd"),Object(g["a"])(et,Y,Q,!1,null,"a778100c",null)),it=nt.exports,st=n("7413"),ot=n("6d02"),at=n("8842"),lt=n("985b"),rt=n("c3f0"),ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contain1",attrs:{id:"makeDiv"}},[t._v(t._s(t.showText))])},pt=[],gt={name:"showTextMake",props:{parentInput:"",parentInputUrl:"",showID:0},data:function(){return{showText:""}},created:function(){console.log("created showText ID: "+this.showID),this.$bus.$on("textEvent"+this.showID,function(t){document.getElementById("makeDiv").innerHTML=t}),console.log("send componentHandSharkEvent"+this.showID),this.$bus.$emit("componentHandSharkEvent",this.showID)},beforeDestroy:function(){this.$bus.$off("textEvent"+this.showID)},destroyed:function(){console.log("destroyed showText"+this.showID),this.$bus.$emit("destroyed",this.showID)}},ut=gt,ht=(n("bb3a"),Object(g["a"])(ut,ct,pt,!1,null,"8faac030",null)),dt=ht.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contain1"},[t._v(t._s(t.replyText))])},ft=[],xt={name:"replyText",props:{replyText:""},data:function(){return{showText:""}}},vt=xt,bt=(n("2cac"),Object(g["a"])(vt,mt,ft,!1,null,"a826dc64",null)),yt=bt.exports,wt=n("833b"),Lt={name:"customerMsg",data:function(){var t=function(t,e,n){return e?n():n(new Error("請輸入訊息名稱"))};return{loading:!0,tableData:[],paginations:{total:0,pageIndex:1,pageSize:20,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},t:500,ReplyList:[],componentList:[],componentIDList:[],componentShowList:[],componentShowList_Preview:[],componentCntLimit:5,lastComLen:0,destroyedCnt:0,flexList:[],componentID:0,show:!1,show_Preview:!1,messages:[],currentMsgCnt:0,checkFlag:!0,APIbaseURL:"https://test-backend-dot-flow-263607.appspot.com",form:{msgName:""},rules:{msgName:[{validator:t,trigger:"blur"}]}}},components:{videoUploader:it,imageUploader:h,imageMsgUploader:y,imageOnlyUploader:_,showVideo:st["a"],showImage:ot["a"],showImageMsg:at["a"],showImageOnly:lt["a"],addText:X,showText:rt["a"],showTextMake:dt,replyText:yt,addMultiFlex:z,showMultiFlex:wt["a"]},mounted:function(){this.getMsgList()},methods:{onclick:function(t,e){var n=this;(this.destroyedCnt=0,this.lastComLen=this.componentShowList_Preview.length,console.log("onclick lastComLen = "+this.lastComLen),this.messages=t.content,console.log("msgCnt "+this.messages.length),console.log(this.messages),this.currentMsg_id=t.msg_id,"刪除"!=e.label)?(this.show_Preview=!0,console.log(this.componentShowList_Preview.length),this.componentShowList_Preview.length?this.componentShowList_Preview=[]:this.rebuildShow()):this.$confirm("如自動回復或歡迎訊息有此訊息也將一併被刪除！").then(function(e){console.log("deleteMsg "+t.msg_id),n.deleteMsg(t.msg_id),n.componentShowList_Preview=[],n.lastComLen=0,done()}).catch(function(t){})},rebuildShow:function(){var t;for(console.log("rebuildShow"),t=0;t<this.messages.length;t++)"flex"==this.messages[t].type?this.componentShowList_Preview.push({text:"showMultiFlex",id:t+this.componentCntLimit}):"imagemap"==this.messages[t].type?this.componentShowList_Preview.push({text:"showImageMsg",id:t+this.componentCntLimit}):"image"==this.messages[t].type?this.componentShowList_Preview.push({text:"showImageOnly",id:t+this.componentCntLimit}):"text"==this.messages[t].type?this.componentShowList_Preview.push({text:"showText",id:t+this.componentCntLimit}):"video"==this.messages[t].type&&this.componentShowList_Preview.push({text:"showVideo",id:t+this.componentCntLimit})},deleteMsg:function(t){var e=this;this.loading=!0,1==this.tableData.length&&(1==this.paginations.pageIndex||this.paginations.pageIndex--);var n=Object(Z["a"])("Token");r()({method:"post",baseURL:this.APIbaseURL,url:"/delete_msg",data:{msg_id:t},headers:{"Content-Type":"application/json","x-access-token":n}}).then(function(t){e.getMsgList(),console.log(t)})},getMsgList:function(){var t=this,e=Object(Z["a"])("Token");r()({method:"post",baseURL:this.APIbaseURL,url:"/query_msg",data:{limit:this.paginations.pageSize,page:this.paginations.pageIndex},headers:{"Content-Type":"application/json","x-access-token":e}}).then(function(e){console.log(e.data),console.log(e.data.data.length),console.log(e.data.data),t.loading=!1,t.paginations.total=e.data.total,t.tableData=e.data.data})},checkForms:function(){var t,e,n=this;for(this.checkFlag=!0,console.log(this.componentList),this.$refs["form"].validate(function(t){return t?(console.log("success"),!0):(console.log("form fail x"),n.checkFlag=!1,!1)}),t=0;t<this.componentList.length;t++)if("addMultiFlex"==this.componentList[t].text)for(this.$refs.componentList[t].$refs["form"].validate(function(t){return t?(console.log("success"),!0):(n.$message.error("請輸入必填欄位!!"),console.log("form fail"),n.checkFlag=!1,!1)}),e=0;e<this.flexList[t].length;e++)this.$refs.componentList[t].$refs.flex[e].$refs["form"].validate(function(t){return t?(console.log("success"),!0):(n.$message.error("請輸入必填欄位!!"),console.log("form fail f"),n.checkFlag=!1,!1)});else"imageMsgUploader"==this.componentList[t].text&&this.$refs.componentList[t].$refs["form"].validate(function(t){return t?(console.log("success"),!0):(n.$message.error("請輸入必填欄位!!"),console.log("form fail"),n.checkFlag=!1,!1)});this.checkFlag&&this.colletionMsg()},colletionMsg:function(){var t;for(t=0;t<this.componentList.length;t++)this.$refs.componentList[t].post2DB()},parentGetJSON:function(t,e){console.log(t),console.log(e),this.currentMsgCnt++,this.messages[e]=t,this.currentMsgCnt==this.componentList.length&&this.save()},parentGetImagemapReply:function(t){console.log("parentGetImagemapReply "+t),this.ReplyList.push(t),console.log(this.ReplyList)},save:function(){var t=this;this.currentMsgCnt=0;var e={name:this.form.msgName,message:this.messages};console.log(e);var n=Object(Z["a"])("Token");r()({method:"post",baseURL:this.APIbaseURL,url:"/create_msg",data:e,headers:{"Content-Type":"application/json","x-access-token":n}}).then(function(e){console.log(e),200==e.status?(t.loading=!0,t.getMsgList(),t.$message({message:"儲存成功！",type:"success"})):t.$message.error("儲存失敗！")})},addText:function(){var t;for(t=0;t<this.componentIDList.length;t++)if("addText"==this.componentList[t].text)return void this.$message.error("目前文字訊息限一組");for(this.show=!0,t=0;t<this.componentCntLimit;t++)if(-1==this.componentIDList.indexOf(t)){this.componentIDList.push(t),this.componentID=t,this.componentList.push({text:"addText",id:this.componentID}),this.componentShowList.push({text:"showTextMake",id:this.componentID}),console.log(this.componentList);break}},addImage:function(){var t;for(this.show=!0,t=0;t<this.componentCntLimit;t++)if(-1==this.componentIDList.indexOf(t)){this.componentIDList.push(t),this.componentID=t,this.componentList.push({text:"imageOnlyUploader",id:this.componentID}),this.componentShowList.push({text:"showImageOnly",id:this.componentID}),console.log(this.componentList);break}},addVideo:function(){var t;for(this.show=!0,t=0;t<this.componentCntLimit;t++)if(-1==this.componentIDList.indexOf(t)){this.componentIDList.push(t),this.componentID=t,this.componentList.push({text:"videoUploader",id:this.componentID}),this.componentShowList.push({text:"showVideo",id:this.componentID}),console.log(this.componentList);break}},addImageMsg:function(){var t;for(this.show=!0,t=0;t<this.componentCntLimit;t++)if(-1==this.componentIDList.indexOf(t)){this.componentIDList.push(t),this.componentID=t,this.componentList.push({text:"imageMsgUploader",id:this.componentID}),this.componentShowList.push({text:"showImageMsg",id:this.componentID}),console.log(this.componentList);break}},addFlex:function(){var t;for(this.show=!0,t=0;t<this.componentCntLimit;t++)if(-1==this.componentIDList.indexOf(t)){this.componentIDList.push(t),this.componentID=t,this.componentList.push({text:"addMultiFlex",id:this.componentID}),this.componentShowList.push({text:"showMultiFlex",id:this.componentID}),console.log(this.componentList);break}},deleteComponent:function(t){this.componentList.splice(t,1),this.componentShowList.splice(t,1),this.componentIDList.splice(t,1),console.log(this.componentList)},handleSizeChange:function(t){this.loading=!0,this.paginations.pageSize=t,this.getMsgList()},handleCurrentChange:function(t){this.loading=!0,this.paginations.pageIndex=t,this.getMsgList()},destroyedlistener:function(t){console.log("destroyed ID "+t),this.destroyedCnt++,console.log("destroyedCnt = "+this.destroyedCnt+" lastComLen = "+this.lastComLen),this.destroyedCnt==this.lastComLen&&(this.rebuildShow(),this.destroyedCnt=0)},comlistener:function(t){if(!(t<5)){console.log("receive customer componentHandSharkEvent "+t);var e=t-this.componentCntLimit;if("flex"==this.messages[e].type){if(this.flexList=[1],"carousel"==this.messages[e].contents.type){var n;for(n=1;n<this.messages[e].contents.contents.length;n++)this.flexList.push(n+1);this.$bus.$emit("specialEvent"+t,t,this.flexList)}}else if("imagemap"==this.messages[e].type){var i=this.messages[e].baseUrl+"/"+this.messages[e].baseSize.height;this.$bus.$emit("imageMsgUrlEvent"+t,i)}else"image"==this.messages[e].type?this.$bus.$emit("imageUrlEvent"+t,this.messages[e].originalContentUrl):"video"==this.messages[e].type?(this.$bus.$emit("videoUrlEvent"+t,this.messages[e].originalContentUrl),this.$bus.$emit("vedioPreviewUrlEvent"+t,this.messages[e].previewImageUrl)):"text"==this.messages[e].type&&this.$bus.$emit("textEvent"+t,this.messages[e].htmlStr)}},flexlistener:function(t,e){if(!(t<5)){var n=t-this.componentCntLimit;if(console.log("receive customer flexHandSharkEvent "+t+" "+e),"carousel"==this.messages[n].contents.type){for(this.$bus.$emit("imageUrlEvent"+t+"_"+(e+1),this.messages[n].contents.contents[e].hero.url),this.$bus.$emit("flexTitleEvent"+t+"_"+(e+1),this.messages[n].contents.contents[e].body.contents[0].text),this.$bus.$emit("flexTextEvent"+t+"_"+(e+1),this.messages[n].contents.contents[e].body.contents[1].text),console.log("ssssssssssss "+e),this.buttonTexts=[],i=0;i<this.messages[n].contents.contents[e].footer.contents.length;i++)this.buttonTexts.push(this.messages[n].contents.contents[e].footer.contents[i].action.label);this.$bus.$emit("showButtonsTextEvevt"+t+"_"+(e+1),this.buttonTexts)}else{var i;for(this.$bus.$emit("imageUrlEvent"+t+"_"+(e+1),this.messages[n].contents.hero.url),this.$bus.$emit("flexTitleEvent"+t+"_"+(e+1),this.messages[n].contents.body.contents[0].text),this.$bus.$emit("flexTextEvent"+t+"_"+(e+1),this.messages[n].contents.body.contents[1].text),console.log("ssssssssssss "+e),this.buttonTexts=[],i=0;i<this.messages[n].contents.footer.contents.length;i++)this.buttonTexts.push(this.messages[n].contents.footer.contents[i].action.label);this.$bus.$emit("showButtonsTextEvevt"+t+"_"+(e+1),this.buttonTexts)}}},moveUp:function(t){if(0!=t){var e=[this.componentList[t],this.componentList[t-1]];this.componentList[t-1]=e[0],this.componentList[t]=e[1];var n=[this.componentIDList[t],this.componentIDList[t-1]];this.componentIDList[t-1]=n[0],this.componentIDList[t]=n[1];var i=[this.componentShowList[t],this.componentShowList[t-1]];this.componentShowList[t-1]=i[0],this.componentShowList[t]=i[1];var s=[];s=[],s=this.componentList,this.componentList=[],this.componentList=s,s=[],s=this.componentIDList,this.componentIDList=[],this.componentIDList=s,s=[],s=this.componentShowList,this.componentShowList=[],this.componentShowList=s}},moveDown:function(t){if(4!=t){var e=[this.componentList[t+1],this.componentList[t]];this.componentList[t]=e[0],this.componentList[t+1]=e[1];var n=[this.componentIDList[t+1],this.componentIDList[t]];this.componentIDList[t]=n[0],this.componentIDList[t+1]=n[1];var i=[this.componentShowList[t+1],this.componentShowList[t]];this.componentShowList[t]=i[0],this.componentShowList[t+1]=i[1];var s=[];s=[],s=this.componentList,this.componentList=[],this.componentList=s,s=[],s=this.componentIDList,this.componentIDList=[],this.componentIDList=s,s=[],s=this.componentShowList,this.componentShowList=[],this.componentShowList=s}}},created:function(){var t,e=this;for(t=0;t<this.componentCntLimit;t++)console.log("addListen: specialEvent"+t),this.$bus.$on("specialEvent"+t,function(t,n){e.flexList[t]=n,console.log("customerMsg receive FlexList : "+e.flexList[t]+", ID: "+t)});console.log("addlistener msgList componentHandSharkEvent"),this.$bus.$on("componentHandSharkEvent",this.comlistener),this.$bus.$on("flexHandSharkEvent",this.flexlistener),this.$bus.$on("destroyed",this.destroyedlistener)},beforeDestroy:function(){var t;for(t=0;t<this.componentCntLimit;t++)this.$bus.$off("specialEvent"+t);console.log("beforeDestroy coustomerMsg"),this.$bus.$off("flexHandSharkEvent",this.flexlistener),this.$bus.$off("componentHandSharkEvent",this.comlistener),this.$bus.$off("destroyed",this.destroyedlistener)}},It=Lt,Ct=(n("e853e"),Object(g["a"])(It,i,s,!1,null,"0c2da060",null));e["default"]=Ct.exports},b54a:function(t,e,n){"use strict";n("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},bb3a:function(t,e,n){"use strict";var i=n("0c22"),s=n.n(i);s.a},c3a1:function(t,e,n){},d4a0:function(t,e,n){},d869:function(t,e,n){"use strict";var i=n("5f61"),s=n.n(i);s.a},dc88:function(t,e,n){"use strict";var i=n("d4a0"),s=n.n(i);s.a},e853e:function(t,e,n){"use strict";var i=n("8f93"),s=n.n(i);s.a},f190:function(t,e,n){"use strict";var i=n("209b"),s=n.n(i);s.a}}]);